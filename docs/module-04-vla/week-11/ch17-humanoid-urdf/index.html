<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-module-04-vla/week-11/ch17-humanoid-urdf" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.9.2">
<title data-rh="true">Humanoid Robot Modeling | Physical AI &amp; Humanoid Robotics</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://Mariyamahnoor95.github.io/AI_COURSE_book/img/docusaurus-social-card.jpg"><meta data-rh="true" name="twitter:image" content="https://Mariyamahnoor95.github.io/AI_COURSE_book/img/docusaurus-social-card.jpg"><meta data-rh="true" property="og:url" content="https://Mariyamahnoor95.github.io/AI_COURSE_book/docs/module-04-vla/week-11/ch17-humanoid-urdf"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="keywords" content="robotics, AI, humanoid robotics, ROS 2, physical AI, embodied intelligence, Isaac Sim, VLA models"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Humanoid Robot Modeling | Physical AI &amp; Humanoid Robotics"><meta data-rh="true" name="description" content="Learning Objectives"><meta data-rh="true" property="og:description" content="Learning Objectives"><link data-rh="true" rel="icon" href="/AI_COURSE_book/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://Mariyamahnoor95.github.io/AI_COURSE_book/docs/module-04-vla/week-11/ch17-humanoid-urdf"><link data-rh="true" rel="alternate" href="https://Mariyamahnoor95.github.io/AI_COURSE_book/docs/module-04-vla/week-11/ch17-humanoid-urdf" hreflang="en"><link data-rh="true" rel="alternate" href="https://Mariyamahnoor95.github.io/AI_COURSE_book/docs/module-04-vla/week-11/ch17-humanoid-urdf" hreflang="x-default"><script data-rh="true" type="application/ld+json">{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Module 4: VLA Integration (Weeks 11-13)","item":"https://Mariyamahnoor95.github.io/AI_COURSE_book/docs/module-04-vla"},{"@type":"ListItem","position":2,"name":"Humanoid Robot Modeling","item":"https://Mariyamahnoor95.github.io/AI_COURSE_book/docs/module-04-vla/week-11/ch17-humanoid-urdf"}]}</script><link rel="alternate" type="application/rss+xml" href="/AI_COURSE_book/blog/rss.xml" title="Physical AI &amp; Humanoid Robotics RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/AI_COURSE_book/blog/atom.xml" title="Physical AI &amp; Humanoid Robotics Atom Feed"><link rel="stylesheet" href="/AI_COURSE_book/assets/css/styles.6ba3aa8b.css">
<script src="/AI_COURSE_book/assets/js/runtime~main.0bd37ab6.js" defer="defer"></script>
<script src="/AI_COURSE_book/assets/js/main.003126a8.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<svg style="display: none;"><defs>
<symbol id="theme-svg-external-link" viewBox="0 0 24 24"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"/></symbol>
</defs></svg>
<script>!function(){var t=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();document.documentElement.setAttribute("data-theme",t||(window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light")),document.documentElement.setAttribute("data-theme-choice",t||"system")}(),function(){try{const c=new URLSearchParams(window.location.search).entries();for(var[t,e]of c)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><link rel="preload" as="image" href="/AI_COURSE_book/img/logo.svg"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="theme-layout-navbar navbar navbar--fixed-top"><div class="navbar__inner"><div class="theme-layout-navbar-left navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/AI_COURSE_book/"><div class="navbar__logo"><img src="/AI_COURSE_book/img/logo.svg" alt="Physical AI Logo" class="themedComponent_mlkZ themedComponent--light_NVdE" height="32" width="32"><img src="/AI_COURSE_book/img/logo.svg" alt="Physical AI Logo" class="themedComponent_mlkZ themedComponent--dark_xIcU" height="32" width="32"></div><b class="navbar__title text--truncate">Physical AI &amp; Humanoid Robotics</b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/AI_COURSE_book/docs/intro">üìö Textbook</a><div class="navbar__item dropdown dropdown--hoverable"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link">üéì Modules</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/AI_COURSE_book/docs/foundations">Foundations</a></li><li><a class="dropdown__link" href="/AI_COURSE_book/docs/module-01-ros2">Module 1: ROS 2</a></li><li><a class="dropdown__link" href="/AI_COURSE_book/docs/module-02-digital-twin">Module 2: Digital Twin</a></li><li><a class="dropdown__link" href="/AI_COURSE_book/docs/module-03-isaac">Module 3: NVIDIA Isaac</a></li><li><a aria-current="page" class="dropdown__link dropdown__link--active" href="/AI_COURSE_book/docs/module-04-vla">Module 4: VLA Integration</a></li></ul></div></div><div class="theme-layout-navbar-right navbar__items navbar__items--right"><div class="navbarSearchContainer_Bca1"></div><a href="https://github.com/noori/hackathon1_book" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-label="(opens in new tab)" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="system mode" aria-label="Switch between dark and light mode (currently system mode)"><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP systemToggleIcon_QzmC"><path fill="currentColor" d="m12 21c4.971 0 9-4.029 9-9s-4.029-9-9-9-9 4.029-9 9 4.029 9 9 9zm4.95-13.95c1.313 1.313 2.05 3.093 2.05 4.95s-0.738 3.637-2.05 4.95c-1.313 1.313-3.093 2.05-4.95 2.05v-14c1.857 0 3.637 0.737 4.95 2.05z"></path></svg></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="theme-layout-main main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/AI_COURSE_book/docs/intro"><span title="üè† Home" class="linkLabel_WmDU">üè† Home</span></a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist" href="/AI_COURSE_book/docs/foundations"><span title="Foundations (Weeks 1-2)" class="categoryLinkLabel_W154">Foundations (Weeks 1-2)</span></a><button aria-label="Collapse sidebar category &#x27;Foundations (Weeks 1-2)&#x27;" aria-expanded="true" type="button" class="clean-btn menu__caret"></button></div><ul class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/AI_COURSE_book/docs/foundations/week-01/ch00-intro-physical-ai"><span title="Week 1" class="categoryLinkLabel_W154">Week 1</span></a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/AI_COURSE_book/docs/foundations/week-02/ch02-sensors"><span title="Week 2" class="categoryLinkLabel_W154">Week 2</span></a></div></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist" href="/AI_COURSE_book/docs/module-01-ros2"><span title="Module 1: ROS 2 (Weeks 3-5)" class="categoryLinkLabel_W154">Module 1: ROS 2 (Weeks 3-5)</span></a><button aria-label="Expand sidebar category &#x27;Module 1: ROS 2 (Weeks 3-5)&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist" href="/AI_COURSE_book/docs/module-02-digital-twin"><span title="Module 2: Digital Twin (Weeks 6-7)" class="categoryLinkLabel_W154">Module 2: Digital Twin (Weeks 6-7)</span></a><button aria-label="Expand sidebar category &#x27;Module 2: Digital Twin (Weeks 6-7)&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist" href="/AI_COURSE_book/docs/module-03-isaac"><span title="Module 3: NVIDIA Isaac (Weeks 8-10)" class="categoryLinkLabel_W154">Module 3: NVIDIA Isaac (Weeks 8-10)</span></a><button aria-label="Expand sidebar category &#x27;Module 3: NVIDIA Isaac (Weeks 8-10)&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--active" href="/AI_COURSE_book/docs/module-04-vla"><span title="Module 4: VLA Integration (Weeks 11-13)" class="categoryLinkLabel_W154">Module 4: VLA Integration (Weeks 11-13)</span></a><button aria-label="Collapse sidebar category &#x27;Module 4: VLA Integration (Weeks 11-13)&#x27;" aria-expanded="true" type="button" class="clean-btn menu__caret"></button></div><ul class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" role="button" aria-expanded="true" tabindex="0" href="/AI_COURSE_book/docs/module-04-vla/week-11/ch17-humanoid-urdf"><span title="Week 11" class="categoryLinkLabel_W154">Week 11</span></a></div><ul class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/AI_COURSE_book/docs/module-04-vla/week-11/ch17-humanoid-urdf"><span title="Humanoid Robot Modeling" class="linkLabel_WmDU">Humanoid Robot Modeling</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/AI_COURSE_book/docs/module-04-vla/week-11/ch18-joint-control"><span title="Joint-Level Control" class="linkLabel_WmDU">Joint-Level Control</span></a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/AI_COURSE_book/docs/module-04-vla/week-12/ch19-grasping"><span title="Week 12" class="categoryLinkLabel_W154">Week 12</span></a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/AI_COURSE_book/docs/module-04-vla/week-13/ch21-whisper-voice"><span title="Week 13" class="categoryLinkLabel_W154">Week 13</span></a></div></li></ul></li></ul></nav><button type="button" title="Collapse sidebar" aria-label="Collapse sidebar" class="button button--secondary button--outline collapseSidebarButton_PEFL"><svg width="20" height="20" aria-hidden="true" class="collapseSidebarButtonIcon_kv0_"><g fill="#7a7a7a"><path d="M9.992 10.023c0 .2-.062.399-.172.547l-4.996 7.492a.982.982 0 01-.828.454H1c-.55 0-1-.453-1-1 0-.2.059-.403.168-.551l4.629-6.942L.168 3.078A.939.939 0 010 2.528c0-.548.45-.997 1-.997h2.996c.352 0 .649.18.828.45L9.82 9.472c.11.148.172.347.172.55zm0 0"></path><path d="M19.98 10.023c0 .2-.058.399-.168.547l-4.996 7.492a.987.987 0 01-.828.454h-3c-.547 0-.996-.453-.996-1 0-.2.059-.403.168-.551l4.625-6.942-4.625-6.945a.939.939 0 01-.168-.55 1 1 0 01.996-.997h3c.348 0 .649.18.828.45l4.996 7.492c.11.148.168.347.168.55zm0 0"></path></g></svg></button></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/AI_COURSE_book/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><a class="breadcrumbs__link" href="/AI_COURSE_book/docs/module-04-vla"><span>Module 4: VLA Integration (Weeks 11-13)</span></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">Week 11</span></li><li class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link">Humanoid Robot Modeling</span></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Humanoid Robot Modeling</h1></header>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="learning-objectives">Learning Objectives<a href="#learning-objectives" class="hash-link" aria-label="Direct link to Learning Objectives" title="Direct link to Learning Objectives" translate="no">‚Äã</a></h2>
<p>By the end of this chapter, you will be able to:</p>
<ul>
<li class="">Design and implement URDF models for humanoid robots with complex kinematic structures</li>
<li class="">Configure kinematic chains for arms, legs, torso, and head with proper joint hierarchies</li>
<li class="">Define joint limits, dynamics, and friction parameters for realistic humanoid motion</li>
<li class="">Calculate and verify center of mass properties for balance and stability analysis</li>
<li class="">Apply balance constraints and zero-moment point (ZMP) principles for bipedal locomotion</li>
</ul>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="introduction">Introduction<a href="#introduction" class="hash-link" aria-label="Direct link to Introduction" title="Direct link to Introduction" translate="no">‚Äã</a></h2>
<p>Humanoid robots represent one of the most challenging applications of robotic modeling due to their complex kinematic structures, high degrees of freedom, and strict balance requirements. Unlike wheeled or tracked robots, humanoid robots must maintain dynamic balance while walking, manipulating objects, and interacting with human environments. The Unified Robot Description Format (URDF) provides the foundation for modeling these sophisticated systems, enabling simulation, motion planning, and control algorithm development.</p>
<p>Modeling a humanoid robot requires careful attention to anatomical structure, mass distribution, joint constraints, and stability principles. A typical humanoid has 20-40 degrees of freedom distributed across the torso, arms, legs, and head. Each joint must be precisely characterized with its range of motion, velocity limits, effort constraints, and friction properties. The mass and inertia properties of each link directly affect the robot&#x27;s center of mass, which is critical for maintaining balance during locomotion and manipulation tasks.</p>
<p>This chapter builds on URDF fundamentals from Chapter 5 and sensor modeling from Chapter 8, extending these concepts to humanoid-specific challenges. We&#x27;ll explore how to structure kinematic chains for bipedal locomotion, configure realistic joint dynamics, compute center of mass properties, and apply balance constraints based on zero-moment point theory. These skills are essential for developing Vision-Language-Action (VLA) models that can control humanoid robots in real-world environments.</p>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="1-humanoid-urdf-structure">1. Humanoid URDF Structure<a href="#1-humanoid-urdf-structure" class="hash-link" aria-label="Direct link to 1. Humanoid URDF Structure" title="Direct link to 1. Humanoid URDF Structure" translate="no">‚Äã</a></h2>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="hierarchical-kinematic-architecture">Hierarchical Kinematic Architecture<a href="#hierarchical-kinematic-architecture" class="hash-link" aria-label="Direct link to Hierarchical Kinematic Architecture" title="Direct link to Hierarchical Kinematic Architecture" translate="no">‚Äã</a></h3>
<p>A humanoid robot URDF follows a hierarchical tree structure with the torso (or pelvis) typically serving as the root link. From this root, kinematic chains branch out to the head, left arm, right arm, left leg, and right leg. This design mirrors human anatomy and simplifies motion planning by treating limbs as independent chains when appropriate. The root link is often connected to a virtual <code>base_link</code> or <code>world</code> frame through a floating base joint (6-DOF) to allow the robot to move freely in space.</p>
<p>The standard kinematic hierarchy for a humanoid robot:</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">base_link (floating base)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">‚îî‚îÄ‚îÄ pelvis</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ‚îú‚îÄ‚îÄ torso</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ‚îÇ   ‚îú‚îÄ‚îÄ head_chain</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ‚îÇ   ‚îú‚îÄ‚îÄ left_arm_chain</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ‚îÇ   ‚îî‚îÄ‚îÄ right_arm_chain</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ‚îú‚îÄ‚îÄ left_leg_chain</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ‚îî‚îÄ‚îÄ right_leg_chain</span><br></span></code></pre></div></div>
<p>Each chain consists of links connected by joints. For example, a typical arm chain includes: shoulder_pitch, shoulder_roll, shoulder_yaw, elbow, wrist_pitch, wrist_roll, and gripper joints. A leg chain includes: hip_yaw, hip_roll, hip_pitch, knee, ankle_pitch, and ankle_roll joints. The exact structure depends on the specific humanoid design but generally follows biological joint arrangements.</p>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="link-properties-for-humanoid-robots">Link Properties for Humanoid Robots<a href="#link-properties-for-humanoid-robots" class="hash-link" aria-label="Direct link to Link Properties for Humanoid Robots" title="Direct link to Link Properties for Humanoid Robots" translate="no">‚Äã</a></h3>
<p>Each link in a humanoid URDF must define three essential properties: visual geometry (for rendering), collision geometry (for physics simulation), and inertial properties (mass, center of mass offset, inertia tensor). For humanoid robots, accurate inertial properties are critical because they directly affect balance calculations. Underestimating limb masses or incorrectly positioning centers of mass can lead to unstable walking gaits or tipping.</p>
<p>Example torso link with realistic properties:</p>
<div class="language-xml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-xml codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token entity named-entity" style="color:#36acaa">&amp;lt;</span><span class="token plain">link name=&quot;torso&quot;</span><span class="token entity named-entity" style="color:#36acaa">&amp;gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token entity named-entity" style="color:#36acaa">&amp;lt;</span><span class="token plain">visual</span><span class="token entity named-entity" style="color:#36acaa">&amp;gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token entity named-entity" style="color:#36acaa">&amp;lt;</span><span class="token plain">origin xyz=&quot;0 0 0.2&quot; rpy=&quot;0 0 0&quot;/</span><span class="token entity named-entity" style="color:#36acaa">&amp;gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token entity named-entity" style="color:#36acaa">&amp;lt;</span><span class="token plain">geometry</span><span class="token entity named-entity" style="color:#36acaa">&amp;gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token entity named-entity" style="color:#36acaa">&amp;lt;</span><span class="token plain">box size=&quot;0.3 0.2 0.4&quot;/</span><span class="token entity named-entity" style="color:#36acaa">&amp;gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token entity named-entity" style="color:#36acaa">&amp;lt;</span><span class="token plain">/geometry</span><span class="token entity named-entity" style="color:#36acaa">&amp;gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token entity named-entity" style="color:#36acaa">&amp;lt;</span><span class="token plain">material name=&quot;body_color&quot;</span><span class="token entity named-entity" style="color:#36acaa">&amp;gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token entity named-entity" style="color:#36acaa">&amp;lt;</span><span class="token plain">color rgba=&quot;0.8 0.8 0.8 1.0&quot;/</span><span class="token entity named-entity" style="color:#36acaa">&amp;gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token entity named-entity" style="color:#36acaa">&amp;lt;</span><span class="token plain">/material</span><span class="token entity named-entity" style="color:#36acaa">&amp;gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token entity named-entity" style="color:#36acaa">&amp;lt;</span><span class="token plain">/visual</span><span class="token entity named-entity" style="color:#36acaa">&amp;gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token entity named-entity" style="color:#36acaa">&amp;lt;</span><span class="token plain">collision</span><span class="token entity named-entity" style="color:#36acaa">&amp;gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token entity named-entity" style="color:#36acaa">&amp;lt;</span><span class="token plain">origin xyz=&quot;0 0 0.2&quot; rpy=&quot;0 0 0&quot;/</span><span class="token entity named-entity" style="color:#36acaa">&amp;gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token entity named-entity" style="color:#36acaa">&amp;lt;</span><span class="token plain">geometry</span><span class="token entity named-entity" style="color:#36acaa">&amp;gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token entity named-entity" style="color:#36acaa">&amp;lt;</span><span class="token plain">box size=&quot;0.3 0.2 0.4&quot;/</span><span class="token entity named-entity" style="color:#36acaa">&amp;gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token entity named-entity" style="color:#36acaa">&amp;lt;</span><span class="token plain">/geometry</span><span class="token entity named-entity" style="color:#36acaa">&amp;gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token entity named-entity" style="color:#36acaa">&amp;lt;</span><span class="token plain">/collision</span><span class="token entity named-entity" style="color:#36acaa">&amp;gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token entity named-entity" style="color:#36acaa">&amp;lt;</span><span class="token plain">inertial</span><span class="token entity named-entity" style="color:#36acaa">&amp;gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token entity named-entity" style="color:#36acaa">&amp;lt;</span><span class="token plain">origin xyz=&quot;0 0 0.2&quot; rpy=&quot;0 0 0&quot;/</span><span class="token entity named-entity" style="color:#36acaa">&amp;gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token entity named-entity" style="color:#36acaa">&amp;lt;</span><span class="token plain">mass value=&quot;8.0&quot;/</span><span class="token entity named-entity" style="color:#36acaa">&amp;gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token entity named-entity" style="color:#36acaa">&amp;lt;</span><span class="token plain">inertia ixx=&quot;0.16&quot; ixy=&quot;0&quot; ixz=&quot;0&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">             iyy=&quot;0.20&quot; iyz=&quot;0&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">             izz=&quot;0.08&quot;/</span><span class="token entity named-entity" style="color:#36acaa">&amp;gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token entity named-entity" style="color:#36acaa">&amp;lt;</span><span class="token plain">/inertial</span><span class="token entity named-entity" style="color:#36acaa">&amp;gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token entity named-entity" style="color:#36acaa">&amp;lt;</span><span class="token plain">/link</span><span class="token entity named-entity" style="color:#36acaa">&amp;gt;</span><br></span></code></pre></div></div>
<p>The inertia tensor values are calculated based on the link&#x27;s geometry and mass distribution. For a box, the moments of inertia are: Ixx = (1/12)m(h¬≤ + d¬≤), Iyy = (1/12)m(w¬≤ + d¬≤), Izz = (1/12)m(w¬≤ + h¬≤), where m is mass, w is width, h is height, and d is depth.</p>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="material-and-friction-properties">Material and Friction Properties<a href="#material-and-friction-properties" class="hash-link" aria-label="Direct link to Material and Friction Properties" title="Direct link to Material and Friction Properties" translate="no">‚Äã</a></h3>
<p>Humanoid robots often require contact modeling for foot-ground interaction, hand-object manipulation, and collision handling. URDF allows specification of material properties through Gazebo-specific tags that define coefficients of friction, restitution, and contact stiffness. These properties affect how the robot interacts with its environment during simulation.</p>
<p>Example foot link with contact properties:</p>
<div class="language-xml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-xml codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token entity named-entity" style="color:#36acaa">&amp;lt;</span><span class="token plain">gazebo reference=&quot;left_foot&quot;</span><span class="token entity named-entity" style="color:#36acaa">&amp;gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token entity named-entity" style="color:#36acaa">&amp;lt;</span><span class="token plain">mu1</span><span class="token entity named-entity" style="color:#36acaa">&amp;gt;</span><span class="token plain">1.0</span><span class="token entity named-entity" style="color:#36acaa">&amp;lt;</span><span class="token plain">/mu1</span><span class="token entity named-entity" style="color:#36acaa">&amp;gt;</span><span class="token plain">  </span><span class="token entity named-entity" style="color:#36acaa">&amp;lt;</span><span class="token plain">!-- Friction coefficient direction 1 --</span><span class="token entity named-entity" style="color:#36acaa">&amp;gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token entity named-entity" style="color:#36acaa">&amp;lt;</span><span class="token plain">mu2</span><span class="token entity named-entity" style="color:#36acaa">&amp;gt;</span><span class="token plain">1.0</span><span class="token entity named-entity" style="color:#36acaa">&amp;lt;</span><span class="token plain">/mu2</span><span class="token entity named-entity" style="color:#36acaa">&amp;gt;</span><span class="token plain">  </span><span class="token entity named-entity" style="color:#36acaa">&amp;lt;</span><span class="token plain">!-- Friction coefficient direction 2 --</span><span class="token entity named-entity" style="color:#36acaa">&amp;gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token entity named-entity" style="color:#36acaa">&amp;lt;</span><span class="token plain">kp</span><span class="token entity named-entity" style="color:#36acaa">&amp;gt;</span><span class="token plain">1000000.0</span><span class="token entity named-entity" style="color:#36acaa">&amp;lt;</span><span class="token plain">/kp</span><span class="token entity named-entity" style="color:#36acaa">&amp;gt;</span><span class="token plain">  </span><span class="token entity named-entity" style="color:#36acaa">&amp;lt;</span><span class="token plain">!-- Contact stiffness --</span><span class="token entity named-entity" style="color:#36acaa">&amp;gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token entity named-entity" style="color:#36acaa">&amp;lt;</span><span class="token plain">kd</span><span class="token entity named-entity" style="color:#36acaa">&amp;gt;</span><span class="token plain">100.0</span><span class="token entity named-entity" style="color:#36acaa">&amp;lt;</span><span class="token plain">/kd</span><span class="token entity named-entity" style="color:#36acaa">&amp;gt;</span><span class="token plain">  </span><span class="token entity named-entity" style="color:#36acaa">&amp;lt;</span><span class="token plain">!-- Contact damping --</span><span class="token entity named-entity" style="color:#36acaa">&amp;gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token entity named-entity" style="color:#36acaa">&amp;lt;</span><span class="token plain">minDepth</span><span class="token entity named-entity" style="color:#36acaa">&amp;gt;</span><span class="token plain">0.001</span><span class="token entity named-entity" style="color:#36acaa">&amp;lt;</span><span class="token plain">/minDepth</span><span class="token entity named-entity" style="color:#36acaa">&amp;gt;</span><span class="token plain">  </span><span class="token entity named-entity" style="color:#36acaa">&amp;lt;</span><span class="token plain">!-- Minimum penetration depth --</span><span class="token entity named-entity" style="color:#36acaa">&amp;gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token entity named-entity" style="color:#36acaa">&amp;lt;</span><span class="token plain">maxVel</span><span class="token entity named-entity" style="color:#36acaa">&amp;gt;</span><span class="token plain">0.01</span><span class="token entity named-entity" style="color:#36acaa">&amp;lt;</span><span class="token plain">/maxVel</span><span class="token entity named-entity" style="color:#36acaa">&amp;gt;</span><span class="token plain">  </span><span class="token entity named-entity" style="color:#36acaa">&amp;lt;</span><span class="token plain">!-- Maximum contact correction velocity --</span><span class="token entity named-entity" style="color:#36acaa">&amp;gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token entity named-entity" style="color:#36acaa">&amp;lt;</span><span class="token plain">material</span><span class="token entity named-entity" style="color:#36acaa">&amp;gt;</span><span class="token plain">Gazebo/Grey</span><span class="token entity named-entity" style="color:#36acaa">&amp;lt;</span><span class="token plain">/material</span><span class="token entity named-entity" style="color:#36acaa">&amp;gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token entity named-entity" style="color:#36acaa">&amp;lt;</span><span class="token plain">/gazebo</span><span class="token entity named-entity" style="color:#36acaa">&amp;gt;</span><br></span></code></pre></div></div>
<p>High friction coefficients (mu1, mu2 ‚âà 1.0) prevent foot slippage during walking. Contact stiffness (kp) and damping (kd) values affect how the simulator resolves penetration between the foot and ground. Tuning these parameters is essential for stable bipedal locomotion in simulation.</p>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="2-kinematic-chains">2. Kinematic Chains<a href="#2-kinematic-chains" class="hash-link" aria-label="Direct link to 2. Kinematic Chains" title="Direct link to 2. Kinematic Chains" translate="no">‚Äã</a></h2>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="serial-kinematic-chains-for-limbs">Serial Kinematic Chains for Limbs<a href="#serial-kinematic-chains-for-limbs" class="hash-link" aria-label="Direct link to Serial Kinematic Chains for Limbs" title="Direct link to Serial Kinematic Chains for Limbs" translate="no">‚Äã</a></h3>
<p>Each limb of a humanoid robot is modeled as a serial kinematic chain‚Äîa sequence of links connected by joints where each joint has a single parent and (at most) a single child. Serial chains simplify forward kinematics calculations and motion planning. For humanoid robots, the four primary chains are the left arm, right arm, left leg, and right leg, each with 6-7 degrees of freedom.</p>
<p>Example left arm kinematic chain:</p>
<div class="language-xml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-xml codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token entity named-entity" style="color:#36acaa">&amp;lt;</span><span class="token plain">!-- Shoulder joint (3 DOF: pitch, roll, yaw) --</span><span class="token entity named-entity" style="color:#36acaa">&amp;gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token entity named-entity" style="color:#36acaa">&amp;lt;</span><span class="token plain">joint name=&quot;left_shoulder_pitch&quot; type=&quot;revolute&quot;</span><span class="token entity named-entity" style="color:#36acaa">&amp;gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token entity named-entity" style="color:#36acaa">&amp;lt;</span><span class="token plain">parent link=&quot;torso&quot;/</span><span class="token entity named-entity" style="color:#36acaa">&amp;gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token entity named-entity" style="color:#36acaa">&amp;lt;</span><span class="token plain">child link=&quot;left_upper_arm&quot;/</span><span class="token entity named-entity" style="color:#36acaa">&amp;gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token entity named-entity" style="color:#36acaa">&amp;lt;</span><span class="token plain">origin xyz=&quot;0 0.15 0.35&quot; rpy=&quot;0 0 0&quot;/</span><span class="token entity named-entity" style="color:#36acaa">&amp;gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token entity named-entity" style="color:#36acaa">&amp;lt;</span><span class="token plain">axis xyz=&quot;0 1 0&quot;/</span><span class="token entity named-entity" style="color:#36acaa">&amp;gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token entity named-entity" style="color:#36acaa">&amp;lt;</span><span class="token plain">limit lower=&quot;-3.14&quot; upper=&quot;3.14&quot; effort=&quot;100&quot; velocity=&quot;2.0&quot;/</span><span class="token entity named-entity" style="color:#36acaa">&amp;gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token entity named-entity" style="color:#36acaa">&amp;lt;</span><span class="token plain">/joint</span><span class="token entity named-entity" style="color:#36acaa">&amp;gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token entity named-entity" style="color:#36acaa">&amp;lt;</span><span class="token plain">joint name=&quot;left_shoulder_roll&quot; type=&quot;revolute&quot;</span><span class="token entity named-entity" style="color:#36acaa">&amp;gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token entity named-entity" style="color:#36acaa">&amp;lt;</span><span class="token plain">parent link=&quot;left_upper_arm&quot;/</span><span class="token entity named-entity" style="color:#36acaa">&amp;gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token entity named-entity" style="color:#36acaa">&amp;lt;</span><span class="token plain">child link=&quot;left_upper_arm_roll&quot;/</span><span class="token entity named-entity" style="color:#36acaa">&amp;gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token entity named-entity" style="color:#36acaa">&amp;lt;</span><span class="token plain">origin xyz=&quot;0 0 0&quot; rpy=&quot;0 0 0&quot;/</span><span class="token entity named-entity" style="color:#36acaa">&amp;gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token entity named-entity" style="color:#36acaa">&amp;lt;</span><span class="token plain">axis xyz=&quot;1 0 0&quot;/</span><span class="token entity named-entity" style="color:#36acaa">&amp;gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token entity named-entity" style="color:#36acaa">&amp;lt;</span><span class="token plain">limit lower=&quot;-1.57&quot; upper=&quot;1.57&quot; effort=&quot;100&quot; velocity=&quot;2.0&quot;/</span><span class="token entity named-entity" style="color:#36acaa">&amp;gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token entity named-entity" style="color:#36acaa">&amp;lt;</span><span class="token plain">/joint</span><span class="token entity named-entity" style="color:#36acaa">&amp;gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token entity named-entity" style="color:#36acaa">&amp;lt;</span><span class="token plain">!-- Elbow joint (1 DOF) --</span><span class="token entity named-entity" style="color:#36acaa">&amp;gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token entity named-entity" style="color:#36acaa">&amp;lt;</span><span class="token plain">joint name=&quot;left_elbow&quot; type=&quot;revolute&quot;</span><span class="token entity named-entity" style="color:#36acaa">&amp;gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token entity named-entity" style="color:#36acaa">&amp;lt;</span><span class="token plain">parent link=&quot;left_upper_arm_roll&quot;/</span><span class="token entity named-entity" style="color:#36acaa">&amp;gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token entity named-entity" style="color:#36acaa">&amp;lt;</span><span class="token plain">child link=&quot;left_forearm&quot;/</span><span class="token entity named-entity" style="color:#36acaa">&amp;gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token entity named-entity" style="color:#36acaa">&amp;lt;</span><span class="token plain">origin xyz=&quot;0 0 -0.25&quot; rpy=&quot;0 0 0&quot;/</span><span class="token entity named-entity" style="color:#36acaa">&amp;gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token entity named-entity" style="color:#36acaa">&amp;lt;</span><span class="token plain">axis xyz=&quot;0 1 0&quot;/</span><span class="token entity named-entity" style="color:#36acaa">&amp;gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token entity named-entity" style="color:#36acaa">&amp;lt;</span><span class="token plain">limit lower=&quot;0&quot; upper=&quot;2.35&quot; effort=&quot;80&quot; velocity=&quot;2.0&quot;/</span><span class="token entity named-entity" style="color:#36acaa">&amp;gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token entity named-entity" style="color:#36acaa">&amp;lt;</span><span class="token plain">/joint</span><span class="token entity named-entity" style="color:#36acaa">&amp;gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token entity named-entity" style="color:#36acaa">&amp;lt;</span><span class="token plain">!-- Wrist joint (2 DOF: pitch, roll) --</span><span class="token entity named-entity" style="color:#36acaa">&amp;gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token entity named-entity" style="color:#36acaa">&amp;lt;</span><span class="token plain">joint name=&quot;left_wrist_pitch&quot; type=&quot;revolute&quot;</span><span class="token entity named-entity" style="color:#36acaa">&amp;gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token entity named-entity" style="color:#36acaa">&amp;lt;</span><span class="token plain">parent link=&quot;left_forearm&quot;/</span><span class="token entity named-entity" style="color:#36acaa">&amp;gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token entity named-entity" style="color:#36acaa">&amp;lt;</span><span class="token plain">child link=&quot;left_hand&quot;/</span><span class="token entity named-entity" style="color:#36acaa">&amp;gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token entity named-entity" style="color:#36acaa">&amp;lt;</span><span class="token plain">origin xyz=&quot;0 0 -0.25&quot; rpy=&quot;0 0 0&quot;/</span><span class="token entity named-entity" style="color:#36acaa">&amp;gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token entity named-entity" style="color:#36acaa">&amp;lt;</span><span class="token plain">axis xyz=&quot;0 1 0&quot;/</span><span class="token entity named-entity" style="color:#36acaa">&amp;gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token entity named-entity" style="color:#36acaa">&amp;lt;</span><span class="token plain">limit lower=&quot;-1.57&quot; upper=&quot;1.57&quot; effort=&quot;50&quot; velocity=&quot;2.0&quot;/</span><span class="token entity named-entity" style="color:#36acaa">&amp;gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token entity named-entity" style="color:#36acaa">&amp;lt;</span><span class="token plain">/joint</span><span class="token entity named-entity" style="color:#36acaa">&amp;gt;</span><br></span></code></pre></div></div>
<p>This chain provides 6 degrees of freedom for the arm: 3 at the shoulder (pitch, roll, yaw), 1 at the elbow, and 2 at the wrist. The <code>origin</code> elements define the spatial relationship between parent and child frames, while the <code>axis</code> elements specify the rotation axis for each joint in the parent frame.</p>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="leg-kinematic-chains-for-bipedal-locomotion">Leg Kinematic Chains for Bipedal Locomotion<a href="#leg-kinematic-chains-for-bipedal-locomotion" class="hash-link" aria-label="Direct link to Leg Kinematic Chains for Bipedal Locomotion" title="Direct link to Leg Kinematic Chains for Bipedal Locomotion" translate="no">‚Äã</a></h3>
<p>Leg chains are critical for bipedal locomotion and must support the robot&#x27;s full weight while providing mobility. A typical humanoid leg has 6 DOF: 3 at the hip (yaw, roll, pitch), 1 at the knee, and 2 at the ankle (pitch, roll). This configuration allows the robot to lift its foot, swing the leg forward, and place the foot with proper orientation.</p>
<p>Example left leg kinematic chain:</p>
<div class="language-xml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-xml codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token entity named-entity" style="color:#36acaa">&amp;lt;</span><span class="token plain">!-- Hip joint (3 DOF) --</span><span class="token entity named-entity" style="color:#36acaa">&amp;gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token entity named-entity" style="color:#36acaa">&amp;lt;</span><span class="token plain">joint name=&quot;left_hip_yaw&quot; type=&quot;revolute&quot;</span><span class="token entity named-entity" style="color:#36acaa">&amp;gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token entity named-entity" style="color:#36acaa">&amp;lt;</span><span class="token plain">parent link=&quot;pelvis&quot;/</span><span class="token entity named-entity" style="color:#36acaa">&amp;gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token entity named-entity" style="color:#36acaa">&amp;lt;</span><span class="token plain">child link=&quot;left_hip_yaw_link&quot;/</span><span class="token entity named-entity" style="color:#36acaa">&amp;gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token entity named-entity" style="color:#36acaa">&amp;lt;</span><span class="token plain">origin xyz=&quot;0 0.1 0&quot; rpy=&quot;0 0 0&quot;/</span><span class="token entity named-entity" style="color:#36acaa">&amp;gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token entity named-entity" style="color:#36acaa">&amp;lt;</span><span class="token plain">axis xyz=&quot;0 0 1&quot;/</span><span class="token entity named-entity" style="color:#36acaa">&amp;gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token entity named-entity" style="color:#36acaa">&amp;lt;</span><span class="token plain">limit lower=&quot;-0.785&quot; upper=&quot;0.785&quot; effort=&quot;150&quot; velocity=&quot;1.5&quot;/</span><span class="token entity named-entity" style="color:#36acaa">&amp;gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token entity named-entity" style="color:#36acaa">&amp;lt;</span><span class="token plain">/joint</span><span class="token entity named-entity" style="color:#36acaa">&amp;gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token entity named-entity" style="color:#36acaa">&amp;lt;</span><span class="token plain">joint name=&quot;left_hip_roll&quot; type=&quot;revolute&quot;</span><span class="token entity named-entity" style="color:#36acaa">&amp;gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token entity named-entity" style="color:#36acaa">&amp;lt;</span><span class="token plain">parent link=&quot;left_hip_yaw_link&quot;/</span><span class="token entity named-entity" style="color:#36acaa">&amp;gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token entity named-entity" style="color:#36acaa">&amp;lt;</span><span class="token plain">child link=&quot;left_hip_roll_link&quot;/</span><span class="token entity named-entity" style="color:#36acaa">&amp;gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token entity named-entity" style="color:#36acaa">&amp;lt;</span><span class="token plain">origin xyz=&quot;0 0 0&quot; rpy=&quot;0 0 0&quot;/</span><span class="token entity named-entity" style="color:#36acaa">&amp;gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token entity named-entity" style="color:#36acaa">&amp;lt;</span><span class="token plain">axis xyz=&quot;1 0 0&quot;/</span><span class="token entity named-entity" style="color:#36acaa">&amp;gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token entity named-entity" style="color:#36acaa">&amp;lt;</span><span class="token plain">limit lower=&quot;-0.523&quot; upper=&quot;0.523&quot; effort=&quot;150&quot; velocity=&quot;1.5&quot;/</span><span class="token entity named-entity" style="color:#36acaa">&amp;gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token entity named-entity" style="color:#36acaa">&amp;lt;</span><span class="token plain">/joint</span><span class="token entity named-entity" style="color:#36acaa">&amp;gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token entity named-entity" style="color:#36acaa">&amp;lt;</span><span class="token plain">joint name=&quot;left_hip_pitch&quot; type=&quot;revolute&quot;</span><span class="token entity named-entity" style="color:#36acaa">&amp;gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token entity named-entity" style="color:#36acaa">&amp;lt;</span><span class="token plain">parent link=&quot;left_hip_roll_link&quot;/</span><span class="token entity named-entity" style="color:#36acaa">&amp;gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token entity named-entity" style="color:#36acaa">&amp;lt;</span><span class="token plain">child link=&quot;left_thigh&quot;/</span><span class="token entity named-entity" style="color:#36acaa">&amp;gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token entity named-entity" style="color:#36acaa">&amp;lt;</span><span class="token plain">origin xyz=&quot;0 0 0&quot; rpy=&quot;0 0 0&quot;/</span><span class="token entity named-entity" style="color:#36acaa">&amp;gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token entity named-entity" style="color:#36acaa">&amp;lt;</span><span class="token plain">axis xyz=&quot;0 1 0&quot;/</span><span class="token entity named-entity" style="color:#36acaa">&amp;gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token entity named-entity" style="color:#36acaa">&amp;lt;</span><span class="token plain">limit lower=&quot;-1.57&quot; upper=&quot;1.57&quot; effort=&quot;150&quot; velocity=&quot;1.5&quot;/</span><span class="token entity named-entity" style="color:#36acaa">&amp;gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token entity named-entity" style="color:#36acaa">&amp;lt;</span><span class="token plain">/joint</span><span class="token entity named-entity" style="color:#36acaa">&amp;gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token entity named-entity" style="color:#36acaa">&amp;lt;</span><span class="token plain">!-- Knee joint (1 DOF) --</span><span class="token entity named-entity" style="color:#36acaa">&amp;gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token entity named-entity" style="color:#36acaa">&amp;lt;</span><span class="token plain">joint name=&quot;left_knee&quot; type=&quot;revolute&quot;</span><span class="token entity named-entity" style="color:#36acaa">&amp;gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token entity named-entity" style="color:#36acaa">&amp;lt;</span><span class="token plain">parent link=&quot;left_thigh&quot;/</span><span class="token entity named-entity" style="color:#36acaa">&amp;gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token entity named-entity" style="color:#36acaa">&amp;lt;</span><span class="token plain">child link=&quot;left_shin&quot;/</span><span class="token entity named-entity" style="color:#36acaa">&amp;gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token entity named-entity" style="color:#36acaa">&amp;lt;</span><span class="token plain">origin xyz=&quot;0 0 -0.35&quot; rpy=&quot;0 0 0&quot;/</span><span class="token entity named-entity" style="color:#36acaa">&amp;gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token entity named-entity" style="color:#36acaa">&amp;lt;</span><span class="token plain">axis xyz=&quot;0 1 0&quot;/</span><span class="token entity named-entity" style="color:#36acaa">&amp;gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token entity named-entity" style="color:#36acaa">&amp;lt;</span><span class="token plain">limit lower=&quot;0&quot; upper=&quot;2.35&quot; effort=&quot;150&quot; velocity=&quot;2.0&quot;/</span><span class="token entity named-entity" style="color:#36acaa">&amp;gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token entity named-entity" style="color:#36acaa">&amp;lt;</span><span class="token plain">/joint</span><span class="token entity named-entity" style="color:#36acaa">&amp;gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token entity named-entity" style="color:#36acaa">&amp;lt;</span><span class="token plain">!-- Ankle joint (2 DOF) --</span><span class="token entity named-entity" style="color:#36acaa">&amp;gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token entity named-entity" style="color:#36acaa">&amp;lt;</span><span class="token plain">joint name=&quot;left_ankle_pitch&quot; type=&quot;revolute&quot;</span><span class="token entity named-entity" style="color:#36acaa">&amp;gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token entity named-entity" style="color:#36acaa">&amp;lt;</span><span class="token plain">parent link=&quot;left_shin&quot;/</span><span class="token entity named-entity" style="color:#36acaa">&amp;gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token entity named-entity" style="color:#36acaa">&amp;lt;</span><span class="token plain">child link=&quot;left_foot&quot;/</span><span class="token entity named-entity" style="color:#36acaa">&amp;gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token entity named-entity" style="color:#36acaa">&amp;lt;</span><span class="token plain">origin xyz=&quot;0 0 -0.35&quot; rpy=&quot;0 0 0&quot;/</span><span class="token entity named-entity" style="color:#36acaa">&amp;gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token entity named-entity" style="color:#36acaa">&amp;lt;</span><span class="token plain">axis xyz=&quot;0 1 0&quot;/</span><span class="token entity named-entity" style="color:#36acaa">&amp;gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token entity named-entity" style="color:#36acaa">&amp;lt;</span><span class="token plain">limit lower=&quot;-0.785&quot; upper=&quot;0.785&quot; effort=&quot;100&quot; velocity=&quot;2.0&quot;/</span><span class="token entity named-entity" style="color:#36acaa">&amp;gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token entity named-entity" style="color:#36acaa">&amp;lt;</span><span class="token plain">/joint</span><span class="token entity named-entity" style="color:#36acaa">&amp;gt;</span><br></span></code></pre></div></div>
<p>The leg chain&#x27;s joint limits are carefully chosen to match human biomechanics while preventing singularities and self-collisions. The knee joint, for example, only allows flexion (0 to 135 degrees) and prevents hyperextension.</p>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="forward-and-inverse-kinematics">Forward and Inverse Kinematics<a href="#forward-and-inverse-kinematics" class="hash-link" aria-label="Direct link to Forward and Inverse Kinematics" title="Direct link to Forward and Inverse Kinematics" translate="no">‚Äã</a></h3>
<p>Forward kinematics (FK) computes the end-effector pose (position and orientation) given joint angles. For a serial chain with n joints, FK involves multiplying transformation matrices from the base to the tip. In ROS 2, the <code>robot_state_publisher</code> package performs FK automatically by listening to joint states and publishing TF transforms.</p>
<p>Inverse kinematics (IK) solves the opposite problem: finding joint angles that achieve a desired end-effector pose. IK is essential for motion planning tasks like reaching for objects or positioning the foot during walking. For humanoid robots, IK is often solved using numerical methods (Jacobian-based, optimization-based) or analytical solutions for specific kinematic structures. Libraries like MoveIt 2 provide IK solvers that integrate with URDF models.</p>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="3-joint-limits-and-dynamics">3. Joint Limits and Dynamics<a href="#3-joint-limits-and-dynamics" class="hash-link" aria-label="Direct link to 3. Joint Limits and Dynamics" title="Direct link to 3. Joint Limits and Dynamics" translate="no">‚Äã</a></h2>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="position-velocity-and-effort-limits">Position, Velocity, and Effort Limits<a href="#position-velocity-and-effort-limits" class="hash-link" aria-label="Direct link to Position, Velocity, and Effort Limits" title="Direct link to Position, Velocity, and Effort Limits" translate="no">‚Äã</a></h3>
<p>Every revolute and prismatic joint in a humanoid URDF must specify three types of limits: position (angular or linear range), velocity (maximum speed), and effort (maximum force or torque). These limits ensure the robot operates within safe mechanical constraints and prevent damage to actuators and linkages.</p>
<div class="language-xml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-xml codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token entity named-entity" style="color:#36acaa">&amp;lt;</span><span class="token plain">joint name=&quot;left_knee&quot; type=&quot;revolute&quot;</span><span class="token entity named-entity" style="color:#36acaa">&amp;gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token entity named-entity" style="color:#36acaa">&amp;lt;</span><span class="token plain">parent link=&quot;left_thigh&quot;/</span><span class="token entity named-entity" style="color:#36acaa">&amp;gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token entity named-entity" style="color:#36acaa">&amp;lt;</span><span class="token plain">child link=&quot;left_shin&quot;/</span><span class="token entity named-entity" style="color:#36acaa">&amp;gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token entity named-entity" style="color:#36acaa">&amp;lt;</span><span class="token plain">origin xyz=&quot;0 0 -0.35&quot; rpy=&quot;0 0 0&quot;/</span><span class="token entity named-entity" style="color:#36acaa">&amp;gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token entity named-entity" style="color:#36acaa">&amp;lt;</span><span class="token plain">axis xyz=&quot;0 1 0&quot;/</span><span class="token entity named-entity" style="color:#36acaa">&amp;gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token entity named-entity" style="color:#36acaa">&amp;lt;</span><span class="token plain">limit lower=&quot;0.0&quot; upper=&quot;2.35&quot; effort=&quot;150.0&quot; velocity=&quot;2.0&quot;/</span><span class="token entity named-entity" style="color:#36acaa">&amp;gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token entity named-entity" style="color:#36acaa">&amp;lt;</span><span class="token plain">dynamics damping=&quot;0.5&quot; friction=&quot;0.1&quot;/</span><span class="token entity named-entity" style="color:#36acaa">&amp;gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token entity named-entity" style="color:#36acaa">&amp;lt;</span><span class="token plain">/joint</span><span class="token entity named-entity" style="color:#36acaa">&amp;gt;</span><br></span></code></pre></div></div>
<ul>
<li class=""><strong>Position limits</strong> (lower, upper): Define the joint&#x27;s range of motion in radians (revolute) or meters (prismatic). For the knee, 0 to 2.35 rad (0¬∞ to 135¬∞) allows flexion without hyperextension.</li>
<li class=""><strong>Velocity limit</strong>: Maximum angular or linear velocity in rad/s or m/s. A 2.0 rad/s limit allows the knee to bend from fully extended to fully flexed in ~1.2 seconds.</li>
<li class=""><strong>Effort limit</strong>: Maximum torque (N‚ãÖm) or force (N) the actuator can exert. A 150 N‚ãÖm knee torque supports body weight during walking.</li>
</ul>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="joint-dynamics-damping-and-friction">Joint Dynamics: Damping and Friction<a href="#joint-dynamics-damping-and-friction" class="hash-link" aria-label="Direct link to Joint Dynamics: Damping and Friction" title="Direct link to Joint Dynamics: Damping and Friction" translate="no">‚Äã</a></h3>
<p>The <code>dynamics</code> tag specifies damping and friction coefficients that model energy dissipation in the joint. Damping opposes motion proportional to velocity (viscous damping), while friction represents static and kinetic resistance. These parameters affect simulation realism and control performance.</p>
<ul>
<li class=""><strong>Damping</strong> (kg‚ãÖm¬≤/s for revolute, kg/s for prismatic): Models viscous resistance. Higher damping reduces oscillations but requires more control effort. Typical values: 0.1-1.0 for small joints, 0.5-5.0 for large joints.</li>
<li class=""><strong>Friction</strong> (N‚ãÖm for revolute, N for prismatic): Models static and kinetic friction. Affects startup torque and steady-state control. Typical values: 0.01-0.5 for well-lubricated joints.</li>
</ul>
<p>Example leg joint with realistic dynamics:</p>
<div class="language-xml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-xml codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token entity named-entity" style="color:#36acaa">&amp;lt;</span><span class="token plain">joint name=&quot;left_hip_pitch&quot; type=&quot;revolute&quot;</span><span class="token entity named-entity" style="color:#36acaa">&amp;gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token entity named-entity" style="color:#36acaa">&amp;lt;</span><span class="token plain">parent link=&quot;left_hip_roll_link&quot;/</span><span class="token entity named-entity" style="color:#36acaa">&amp;gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token entity named-entity" style="color:#36acaa">&amp;lt;</span><span class="token plain">child link=&quot;left_thigh&quot;/</span><span class="token entity named-entity" style="color:#36acaa">&amp;gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token entity named-entity" style="color:#36acaa">&amp;lt;</span><span class="token plain">origin xyz=&quot;0 0 0&quot; rpy=&quot;0 0 0&quot;/</span><span class="token entity named-entity" style="color:#36acaa">&amp;gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token entity named-entity" style="color:#36acaa">&amp;lt;</span><span class="token plain">axis xyz=&quot;0 1 0&quot;/</span><span class="token entity named-entity" style="color:#36acaa">&amp;gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token entity named-entity" style="color:#36acaa">&amp;lt;</span><span class="token plain">limit lower=&quot;-1.57&quot; upper=&quot;1.57&quot; effort=&quot;150.0&quot; velocity=&quot;1.5&quot;/</span><span class="token entity named-entity" style="color:#36acaa">&amp;gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token entity named-entity" style="color:#36acaa">&amp;lt;</span><span class="token plain">dynamics damping=&quot;1.0&quot; friction=&quot;0.2&quot;/</span><span class="token entity named-entity" style="color:#36acaa">&amp;gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token entity named-entity" style="color:#36acaa">&amp;lt;</span><span class="token plain">/joint</span><span class="token entity named-entity" style="color:#36acaa">&amp;gt;</span><br></span></code></pre></div></div>
<p>Higher damping and friction values at the hip joints reflect the mechanical complexity and weight-bearing requirements of these actuators.</p>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="transmission-and-actuator-modeling">Transmission and Actuator Modeling<a href="#transmission-and-actuator-modeling" class="hash-link" aria-label="Direct link to Transmission and Actuator Modeling" title="Direct link to Transmission and Actuator Modeling" translate="no">‚Äã</a></h3>
<p>For humanoid robots with complex actuation systems (geared motors, series elastic actuators, hydraulic actuators), the URDF can include <code>transmission</code> elements that describe the mechanical relationship between actuators and joints. This is particularly important for robots with gear reduction or cable-driven joints.</p>
<p>Example transmission for a geared joint:</p>
<div class="language-xml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-xml codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token entity named-entity" style="color:#36acaa">&amp;lt;</span><span class="token plain">transmission name=&quot;left_knee_transmission&quot;</span><span class="token entity named-entity" style="color:#36acaa">&amp;gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token entity named-entity" style="color:#36acaa">&amp;lt;</span><span class="token plain">type</span><span class="token entity named-entity" style="color:#36acaa">&amp;gt;</span><span class="token plain">transmission_interface/SimpleTransmission</span><span class="token entity named-entity" style="color:#36acaa">&amp;lt;</span><span class="token plain">/type</span><span class="token entity named-entity" style="color:#36acaa">&amp;gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token entity named-entity" style="color:#36acaa">&amp;lt;</span><span class="token plain">joint name=&quot;left_knee&quot;</span><span class="token entity named-entity" style="color:#36acaa">&amp;gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token entity named-entity" style="color:#36acaa">&amp;lt;</span><span class="token plain">hardwareInterface</span><span class="token entity named-entity" style="color:#36acaa">&amp;gt;</span><span class="token plain">hardware_interface/EffortJointInterface</span><span class="token entity named-entity" style="color:#36acaa">&amp;lt;</span><span class="token plain">/hardwareInterface</span><span class="token entity named-entity" style="color:#36acaa">&amp;gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token entity named-entity" style="color:#36acaa">&amp;lt;</span><span class="token plain">/joint</span><span class="token entity named-entity" style="color:#36acaa">&amp;gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token entity named-entity" style="color:#36acaa">&amp;lt;</span><span class="token plain">actuator name=&quot;left_knee_motor&quot;</span><span class="token entity named-entity" style="color:#36acaa">&amp;gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token entity named-entity" style="color:#36acaa">&amp;lt;</span><span class="token plain">mechanicalReduction</span><span class="token entity named-entity" style="color:#36acaa">&amp;gt;</span><span class="token plain">100</span><span class="token entity named-entity" style="color:#36acaa">&amp;lt;</span><span class="token plain">/mechanicalReduction</span><span class="token entity named-entity" style="color:#36acaa">&amp;gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token entity named-entity" style="color:#36acaa">&amp;lt;</span><span class="token plain">hardwareInterface</span><span class="token entity named-entity" style="color:#36acaa">&amp;gt;</span><span class="token plain">hardware_interface/EffortJointInterface</span><span class="token entity named-entity" style="color:#36acaa">&amp;lt;</span><span class="token plain">/hardwareInterface</span><span class="token entity named-entity" style="color:#36acaa">&amp;gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token entity named-entity" style="color:#36acaa">&amp;lt;</span><span class="token plain">/actuator</span><span class="token entity named-entity" style="color:#36acaa">&amp;gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token entity named-entity" style="color:#36acaa">&amp;lt;</span><span class="token plain">/transmission</span><span class="token entity named-entity" style="color:#36acaa">&amp;gt;</span><br></span></code></pre></div></div>
<p>The <code>mechanicalReduction</code> of 100 indicates a 100:1 gear ratio, meaning the motor rotates 100 times for each joint rotation. This increases torque at the cost of speed.</p>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="4-center-of-mass">4. Center of Mass<a href="#4-center-of-mass" class="hash-link" aria-label="Direct link to 4. Center of Mass" title="Direct link to 4. Center of Mass" translate="no">‚Äã</a></h2>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="calculating-system-center-of-mass">Calculating System Center of Mass<a href="#calculating-system-center-of-mass" class="hash-link" aria-label="Direct link to Calculating System Center of Mass" title="Direct link to Calculating System Center of Mass" translate="no">‚Äã</a></h3>
<p>The center of mass (CoM) of a humanoid robot is the weighted average position of all link masses. For a robot with n links, the CoM position is:</p>
<p><strong>CoM = (Œ£·µ¢ m·µ¢ √ó p·µ¢) / Œ£·µ¢ m·µ¢</strong></p>
<p>where m·µ¢ is the mass of link i and p·µ¢ is the position of its center of mass in the world frame. The CoM position changes dynamically as the robot moves its limbs, making it critical for balance control.</p>
<p>In ROS 2, you can compute the CoM using the URDF model and current joint states:</p>
<div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> numpy </span><span class="token keyword" style="color:#00009f">as</span><span class="token plain"> np</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> urdf_parser_py</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">urdf </span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> URDF</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">class</span><span class="token plain"> </span><span class="token class-name">CoMCalculator</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">def</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">__init__</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">self</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> urdf_path</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        self</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">robot </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> URDF</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">from_xml_file</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">urdf_path</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        self</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">link_masses </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        self</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">link_com_offsets </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">for</span><span class="token plain"> link </span><span class="token keyword" style="color:#00009f">in</span><span class="token plain"> self</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">robot</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">links</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> link</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">inertial</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                self</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">link_masses</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">link</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">name</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> link</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">inertial</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">mass</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                self</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">link_com_offsets</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">link</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">name</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> np</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">array</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    link</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">inertial</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">origin</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">xyz</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">def</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">compute_com</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">self</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> link_transforms</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token triple-quoted-string string" style="color:#e3116c">&quot;&quot;&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="color:#e3116c">        Compute system center of mass given link transforms.</span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="display:inline-block;color:#e3116c"></span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="color:#e3116c">        Args:</span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="color:#e3116c">            link_transforms: dict mapping link names to 4x4 transform matrices</span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="display:inline-block;color:#e3116c"></span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="color:#e3116c">        Returns:</span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="color:#e3116c">            3D CoM position in world frame</span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="color:#e3116c">        &quot;&quot;&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        total_mass </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0.0</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        weighted_position </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> np</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">zeros</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">3</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">for</span><span class="token plain"> link_name</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> mass </span><span class="token keyword" style="color:#00009f">in</span><span class="token plain"> self</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">link_masses</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">items</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> link_name </span><span class="token keyword" style="color:#00009f">in</span><span class="token plain"> link_transforms</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                T </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> link_transforms</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">link_name</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token comment" style="color:#999988;font-style:italic"># Transform link CoM offset to world frame</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                com_offset_homogeneous </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> np</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">append</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    self</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">link_com_offsets</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">link_name</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                com_world </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> T @ com_offset_homogeneous</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                weighted_position </span><span class="token operator" style="color:#393A34">+=</span><span class="token plain"> mass </span><span class="token operator" style="color:#393A34">*</span><span class="token plain"> com_world</span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">:</span><span class="token number" style="color:#36acaa">3</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                total_mass </span><span class="token operator" style="color:#393A34">+=</span><span class="token plain"> mass</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> weighted_position </span><span class="token operator" style="color:#393A34">/</span><span class="token plain"> total_mass </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> total_mass </span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain">gt</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">else</span><span class="token plain"> np</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">zeros</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">3</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre></div></div>
<p>This calculator reads inertial properties from the URDF and computes the CoM given the current link transforms (obtained from TF2).</p>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="com-projection-and-support-polygon">CoM Projection and Support Polygon<a href="#com-projection-and-support-polygon" class="hash-link" aria-label="Direct link to CoM Projection and Support Polygon" title="Direct link to CoM Projection and Support Polygon" translate="no">‚Äã</a></h3>
<p>For bipedal balance, the projection of the CoM onto the ground plane must lie within the support polygon‚Äîthe convex hull of all ground contact points. During double support (both feet on the ground), the support polygon is the quadrilateral formed by the two feet. During single support, it&#x27;s the contact area of the stance foot.</p>
<p>Example support polygon calculation for double support:</p>
<div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> scipy</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">spatial </span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> ConvexHull</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">def</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">compute_support_polygon</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">left_foot_contacts</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> right_foot_contacts</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token triple-quoted-string string" style="color:#e3116c">&quot;&quot;&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="color:#e3116c">    Compute support polygon from foot contact points.</span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="display:inline-block;color:#e3116c"></span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="color:#e3116c">    Args:</span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="color:#e3116c">        left_foot_contacts: Nx2 array of left foot contact points (x, y)</span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="color:#e3116c">        right_foot_contacts: Mx2 array of right foot contact points (x, y)</span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="display:inline-block;color:#e3116c"></span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="color:#e3116c">    Returns:</span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="color:#e3116c">        Convex hull representing support polygon</span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="color:#e3116c">    &quot;&quot;&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    all_contacts </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> np</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">vstack</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">left_foot_contacts</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> right_foot_contacts</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    hull </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> ConvexHull</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">all_contacts</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> hull</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">def</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">is_com_stable</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">com_position</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> support_polygon</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token triple-quoted-string string" style="color:#e3116c">&quot;&quot;&quot;Check if CoM projection is inside support polygon.&quot;&quot;&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> matplotlib</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">path </span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> Path</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    polygon_path </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> Path</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">support_polygon</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">points</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">support_polygon</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">vertices</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> polygon_path</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">contains_point</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">com_position</span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">:</span><span class="token number" style="color:#36acaa">2</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre></div></div>
<p>If the CoM projection falls outside the support polygon, the robot will tip unless corrective action is taken (stepping, arm swinging, ankle torque).</p>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="dynamic-com-trajectory-planning">Dynamic CoM Trajectory Planning<a href="#dynamic-com-trajectory-planning" class="hash-link" aria-label="Direct link to Dynamic CoM Trajectory Planning" title="Direct link to Dynamic CoM Trajectory Planning" translate="no">‚Äã</a></h3>
<p>During walking, the CoM trajectory must be planned to ensure continuous stability. A common approach is to use a linear inverted pendulum model (LIPM) where the CoM is treated as a point mass above the zero-moment point (ZMP). The LIPM dynamics are:</p>
<p><strong>·∫ç = œâ¬≤ (x - p)</strong></p>
<p>where x is the CoM horizontal position, p is the ZMP position, and œâ = ‚àö(g/h) with g = 9.81 m/s¬≤ and h the CoM height. By controlling the ZMP position, the controller can influence CoM acceleration and maintain balance.</p>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="5-balance-constraints">5. Balance Constraints<a href="#5-balance-constraints" class="hash-link" aria-label="Direct link to 5. Balance Constraints" title="Direct link to 5. Balance Constraints" translate="no">‚Äã</a></h2>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="zero-moment-point-zmp-theory">Zero-Moment Point (ZMP) Theory<a href="#zero-moment-point-zmp-theory" class="hash-link" aria-label="Direct link to Zero-Moment Point (ZMP) Theory" title="Direct link to Zero-Moment Point (ZMP) Theory" translate="no">‚Äã</a></h3>
<p>The Zero-Moment Point is the point on the ground where the net moment from ground reaction forces is zero. For a humanoid to maintain balance without tipping, the ZMP must remain inside the support polygon. The ZMP position is calculated from the robot&#x27;s dynamics:</p>
<p><strong>pzmp = (Œ£·µ¢ m·µ¢(·∫ç·µ¢ - g)(z·µ¢ - zground)) / (Œ£·µ¢ m·µ¢(zÃà·µ¢ - g))</strong></p>
<p>where the sum is over all robot links, g is gravitational acceleration, and zground is the ground height. In practice, the ZMP is computed from the CoM trajectory and used as a feedback signal for balance control.</p>
<p>Example ZMP computation for a planar humanoid:</p>
<div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">def</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">compute_zmp</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">com_position</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> com_acceleration</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> total_mass</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> com_height</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> g</span><span class="token operator" style="color:#393A34">=</span><span class="token number" style="color:#36acaa">9.81</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token triple-quoted-string string" style="color:#e3116c">&quot;&quot;&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="color:#e3116c">    Compute ZMP position for a planar humanoid.</span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="display:inline-block;color:#e3116c"></span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="color:#e3116c">    Args:</span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="color:#e3116c">        com_position: 2D CoM position [x, y]</span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="color:#e3116c">        com_acceleration: 2D CoM acceleration [ax, ay]</span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="color:#e3116c">        total_mass: Total robot mass (kg)</span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="color:#e3116c">        com_height: CoM height above ground (m)</span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="color:#e3116c">        g: Gravitational acceleration (m/s¬≤)</span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="display:inline-block;color:#e3116c"></span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="color:#e3116c">    Returns:</span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="color:#e3116c">        2D ZMP position [px, py]</span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="color:#e3116c">    &quot;&quot;&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    zmp_x </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> com_position</span><span class="token punctuation" style="color:#393A34">[</span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">-</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">com_height </span><span class="token operator" style="color:#393A34">/</span><span class="token plain"> g</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">*</span><span class="token plain"> com_acceleration</span><span class="token punctuation" style="color:#393A34">[</span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    zmp_y </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> com_position</span><span class="token punctuation" style="color:#393A34">[</span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">-</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">com_height </span><span class="token operator" style="color:#393A34">/</span><span class="token plain"> g</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">*</span><span class="token plain"> com_acceleration</span><span class="token punctuation" style="color:#393A34">[</span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> np</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">array</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">zmp_x</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> zmp_y</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre></div></div>
<p>ZMP-based controllers adjust the robot&#x27;s joint trajectories to keep the ZMP inside the support polygon, preventing falls.</p>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="static-vs-dynamic-balance">Static vs. Dynamic Balance<a href="#static-vs-dynamic-balance" class="hash-link" aria-label="Direct link to Static vs. Dynamic Balance" title="Direct link to Static vs. Dynamic Balance" translate="no">‚Äã</a></h3>
<p><strong>Static balance</strong> occurs when the robot is stationary or moving slowly enough that inertial effects are negligible. The CoM projection must be inside the support polygon. Static balance is simpler to achieve but limits mobility.</p>
<p><strong>Dynamic balance</strong> allows for faster motion and requires considering momentum and angular momentum. Even if the CoM momentarily exits the support polygon, the robot can remain upright if it&#x27;s accelerating back toward stability (e.g., during running or jumping). Dynamic walking gaits use controlled falls where the robot briefly loses static balance but regains it with each step.</p>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="compliance-and-ankle-strategies">Compliance and Ankle Strategies<a href="#compliance-and-ankle-strategies" class="hash-link" aria-label="Direct link to Compliance and Ankle Strategies" title="Direct link to Compliance and Ankle Strategies" translate="no">‚Äã</a></h3>
<p>Humanoid robots use several strategies to maintain balance:</p>
<ol>
<li class="">
<p><strong>Ankle strategy</strong>: Apply torques at the ankle joints to shift the CoM without moving the feet. Effective for small disturbances when both feet are planted.</p>
</li>
<li class="">
<p><strong>Hip strategy</strong>: Rotate the torso at the hips to adjust CoM position. More powerful than ankle strategy but requires more coordination.</p>
</li>
<li class="">
<p><strong>Stepping strategy</strong>: Move the feet to reposition the support polygon under the CoM. Used for large disturbances or planned walking.</p>
</li>
<li class="">
<p><strong>Compliance control</strong>: Use compliant actuators or controllers that allow some joint deflection to absorb impacts and disturbances. Series elastic actuators (SEAs) and impedance control are common approaches.</p>
</li>
</ol>
<p>Example ankle strategy controller:</p>
<div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">class</span><span class="token plain"> </span><span class="token class-name">AnkleBalanceController</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">def</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">__init__</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">self</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> kp</span><span class="token operator" style="color:#393A34">=</span><span class="token number" style="color:#36acaa">500.0</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> kd</span><span class="token operator" style="color:#393A34">=</span><span class="token number" style="color:#36acaa">50.0</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        self</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">kp </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> kp  </span><span class="token comment" style="color:#999988;font-style:italic"># Proportional gain</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        self</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">kd </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> kd  </span><span class="token comment" style="color:#999988;font-style:italic"># Derivative gain</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">def</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">compute_ankle_torque</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">self</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> com_error</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> com_velocity</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token triple-quoted-string string" style="color:#e3116c">&quot;&quot;&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="color:#e3116c">        Compute ankle torque to correct CoM position.</span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="display:inline-block;color:#e3116c"></span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="color:#e3116c">        Args:</span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="color:#e3116c">            com_error: Difference between desired and actual CoM position (m)</span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="color:#e3116c">            com_velocity: CoM velocity (m/s)</span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="display:inline-block;color:#e3116c"></span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="color:#e3116c">        Returns:</span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="color:#e3116c">            Ankle torque (N‚ãÖm)</span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="color:#e3116c">        &quot;&quot;&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> self</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">kp </span><span class="token operator" style="color:#393A34">*</span><span class="token plain"> com_error </span><span class="token operator" style="color:#393A34">+</span><span class="token plain"> self</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">kd </span><span class="token operator" style="color:#393A34">*</span><span class="token plain"> com_velocity</span><br></span></code></pre></div></div>
<p>This PD controller generates ankle torques proportional to the CoM position error and velocity, damping oscillations while correcting balance.</p>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="practical-example">Practical Example<a href="#practical-example" class="hash-link" aria-label="Direct link to Practical Example" title="Direct link to Practical Example" translate="no">‚Äã</a></h2>
<p>Let&#x27;s build a simplified humanoid URDF with legs, torso, and CoM calculation:</p>
<div class="language-xml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-xml codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token entity named-entity" style="color:#36acaa">&amp;lt;</span><span class="token plain">?xml version=&quot;1.0&quot;?</span><span class="token entity named-entity" style="color:#36acaa">&amp;gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token entity named-entity" style="color:#36acaa">&amp;lt;</span><span class="token plain">robot name=&quot;simple_humanoid&quot;</span><span class="token entity named-entity" style="color:#36acaa">&amp;gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token entity named-entity" style="color:#36acaa">&amp;lt;</span><span class="token plain">!-- Base link (floating base) --</span><span class="token entity named-entity" style="color:#36acaa">&amp;gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token entity named-entity" style="color:#36acaa">&amp;lt;</span><span class="token plain">link name=&quot;base_link&quot;/</span><span class="token entity named-entity" style="color:#36acaa">&amp;gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token entity named-entity" style="color:#36acaa">&amp;lt;</span><span class="token plain">!-- Pelvis link --</span><span class="token entity named-entity" style="color:#36acaa">&amp;gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token entity named-entity" style="color:#36acaa">&amp;lt;</span><span class="token plain">link name=&quot;pelvis&quot;</span><span class="token entity named-entity" style="color:#36acaa">&amp;gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token entity named-entity" style="color:#36acaa">&amp;lt;</span><span class="token plain">visual</span><span class="token entity named-entity" style="color:#36acaa">&amp;gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token entity named-entity" style="color:#36acaa">&amp;lt;</span><span class="token plain">geometry</span><span class="token entity named-entity" style="color:#36acaa">&amp;gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token entity named-entity" style="color:#36acaa">&amp;lt;</span><span class="token plain">box size=&quot;0.3 0.2 0.15&quot;/</span><span class="token entity named-entity" style="color:#36acaa">&amp;gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token entity named-entity" style="color:#36acaa">&amp;lt;</span><span class="token plain">/geometry</span><span class="token entity named-entity" style="color:#36acaa">&amp;gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token entity named-entity" style="color:#36acaa">&amp;lt;</span><span class="token plain">material name=&quot;grey&quot;</span><span class="token entity named-entity" style="color:#36acaa">&amp;gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token entity named-entity" style="color:#36acaa">&amp;lt;</span><span class="token plain">color rgba=&quot;0.5 0.5 0.5 1.0&quot;/</span><span class="token entity named-entity" style="color:#36acaa">&amp;gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token entity named-entity" style="color:#36acaa">&amp;lt;</span><span class="token plain">/material</span><span class="token entity named-entity" style="color:#36acaa">&amp;gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token entity named-entity" style="color:#36acaa">&amp;lt;</span><span class="token plain">/visual</span><span class="token entity named-entity" style="color:#36acaa">&amp;gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token entity named-entity" style="color:#36acaa">&amp;lt;</span><span class="token plain">collision</span><span class="token entity named-entity" style="color:#36acaa">&amp;gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token entity named-entity" style="color:#36acaa">&amp;lt;</span><span class="token plain">geometry</span><span class="token entity named-entity" style="color:#36acaa">&amp;gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token entity named-entity" style="color:#36acaa">&amp;lt;</span><span class="token plain">box size=&quot;0.3 0.2 0.15&quot;/</span><span class="token entity named-entity" style="color:#36acaa">&amp;gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token entity named-entity" style="color:#36acaa">&amp;lt;</span><span class="token plain">/geometry</span><span class="token entity named-entity" style="color:#36acaa">&amp;gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token entity named-entity" style="color:#36acaa">&amp;lt;</span><span class="token plain">/collision</span><span class="token entity named-entity" style="color:#36acaa">&amp;gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token entity named-entity" style="color:#36acaa">&amp;lt;</span><span class="token plain">inertial</span><span class="token entity named-entity" style="color:#36acaa">&amp;gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token entity named-entity" style="color:#36acaa">&amp;lt;</span><span class="token plain">mass value=&quot;5.0&quot;/</span><span class="token entity named-entity" style="color:#36acaa">&amp;gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token entity named-entity" style="color:#36acaa">&amp;lt;</span><span class="token plain">inertia ixx=&quot;0.015&quot; ixy=&quot;0&quot; ixz=&quot;0&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">               iyy=&quot;0.020&quot; iyz=&quot;0&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">               izz=&quot;0.016&quot;/</span><span class="token entity named-entity" style="color:#36acaa">&amp;gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token entity named-entity" style="color:#36acaa">&amp;lt;</span><span class="token plain">/inertial</span><span class="token entity named-entity" style="color:#36acaa">&amp;gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token entity named-entity" style="color:#36acaa">&amp;lt;</span><span class="token plain">/link</span><span class="token entity named-entity" style="color:#36acaa">&amp;gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token entity named-entity" style="color:#36acaa">&amp;lt;</span><span class="token plain">joint name=&quot;base_to_pelvis&quot; type=&quot;fixed&quot;</span><span class="token entity named-entity" style="color:#36acaa">&amp;gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token entity named-entity" style="color:#36acaa">&amp;lt;</span><span class="token plain">parent link=&quot;base_link&quot;/</span><span class="token entity named-entity" style="color:#36acaa">&amp;gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token entity named-entity" style="color:#36acaa">&amp;lt;</span><span class="token plain">child link=&quot;pelvis&quot;/</span><span class="token entity named-entity" style="color:#36acaa">&amp;gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token entity named-entity" style="color:#36acaa">&amp;lt;</span><span class="token plain">origin xyz=&quot;0 0 0.8&quot; rpy=&quot;0 0 0&quot;/</span><span class="token entity named-entity" style="color:#36acaa">&amp;gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token entity named-entity" style="color:#36acaa">&amp;lt;</span><span class="token plain">/joint</span><span class="token entity named-entity" style="color:#36acaa">&amp;gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token entity named-entity" style="color:#36acaa">&amp;lt;</span><span class="token plain">!-- Torso link --</span><span class="token entity named-entity" style="color:#36acaa">&amp;gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token entity named-entity" style="color:#36acaa">&amp;lt;</span><span class="token plain">link name=&quot;torso&quot;</span><span class="token entity named-entity" style="color:#36acaa">&amp;gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token entity named-entity" style="color:#36acaa">&amp;lt;</span><span class="token plain">visual</span><span class="token entity named-entity" style="color:#36acaa">&amp;gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token entity named-entity" style="color:#36acaa">&amp;lt;</span><span class="token plain">origin xyz=&quot;0 0 0.25&quot; rpy=&quot;0 0 0&quot;/</span><span class="token entity named-entity" style="color:#36acaa">&amp;gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token entity named-entity" style="color:#36acaa">&amp;lt;</span><span class="token plain">geometry</span><span class="token entity named-entity" style="color:#36acaa">&amp;gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token entity named-entity" style="color:#36acaa">&amp;lt;</span><span class="token plain">box size=&quot;0.35 0.25 0.5&quot;/</span><span class="token entity named-entity" style="color:#36acaa">&amp;gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token entity named-entity" style="color:#36acaa">&amp;lt;</span><span class="token plain">/geometry</span><span class="token entity named-entity" style="color:#36acaa">&amp;gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token entity named-entity" style="color:#36acaa">&amp;lt;</span><span class="token plain">material name=&quot;grey&quot;/</span><span class="token entity named-entity" style="color:#36acaa">&amp;gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token entity named-entity" style="color:#36acaa">&amp;lt;</span><span class="token plain">/visual</span><span class="token entity named-entity" style="color:#36acaa">&amp;gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token entity named-entity" style="color:#36acaa">&amp;lt;</span><span class="token plain">collision</span><span class="token entity named-entity" style="color:#36acaa">&amp;gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token entity named-entity" style="color:#36acaa">&amp;lt;</span><span class="token plain">origin xyz=&quot;0 0 0.25&quot; rpy=&quot;0 0 0&quot;/</span><span class="token entity named-entity" style="color:#36acaa">&amp;gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token entity named-entity" style="color:#36acaa">&amp;lt;</span><span class="token plain">geometry</span><span class="token entity named-entity" style="color:#36acaa">&amp;gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token entity named-entity" style="color:#36acaa">&amp;lt;</span><span class="token plain">box size=&quot;0.35 0.25 0.5&quot;/</span><span class="token entity named-entity" style="color:#36acaa">&amp;gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token entity named-entity" style="color:#36acaa">&amp;lt;</span><span class="token plain">/geometry</span><span class="token entity named-entity" style="color:#36acaa">&amp;gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token entity named-entity" style="color:#36acaa">&amp;lt;</span><span class="token plain">/collision</span><span class="token entity named-entity" style="color:#36acaa">&amp;gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token entity named-entity" style="color:#36acaa">&amp;lt;</span><span class="token plain">inertial</span><span class="token entity named-entity" style="color:#36acaa">&amp;gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token entity named-entity" style="color:#36acaa">&amp;lt;</span><span class="token plain">origin xyz=&quot;0 0 0.25&quot; rpy=&quot;0 0 0&quot;/</span><span class="token entity named-entity" style="color:#36acaa">&amp;gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token entity named-entity" style="color:#36acaa">&amp;lt;</span><span class="token plain">mass value=&quot;10.0&quot;/</span><span class="token entity named-entity" style="color:#36acaa">&amp;gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token entity named-entity" style="color:#36acaa">&amp;lt;</span><span class="token plain">inertia ixx=&quot;0.25&quot; ixy=&quot;0&quot; ixz=&quot;0&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">               iyy=&quot;0.30&quot; iyz=&quot;0&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">               izz=&quot;0.12&quot;/</span><span class="token entity named-entity" style="color:#36acaa">&amp;gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token entity named-entity" style="color:#36acaa">&amp;lt;</span><span class="token plain">/inertial</span><span class="token entity named-entity" style="color:#36acaa">&amp;gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token entity named-entity" style="color:#36acaa">&amp;lt;</span><span class="token plain">/link</span><span class="token entity named-entity" style="color:#36acaa">&amp;gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token entity named-entity" style="color:#36acaa">&amp;lt;</span><span class="token plain">joint name=&quot;torso_joint&quot; type=&quot;fixed&quot;</span><span class="token entity named-entity" style="color:#36acaa">&amp;gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token entity named-entity" style="color:#36acaa">&amp;lt;</span><span class="token plain">parent link=&quot;pelvis&quot;/</span><span class="token entity named-entity" style="color:#36acaa">&amp;gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token entity named-entity" style="color:#36acaa">&amp;lt;</span><span class="token plain">child link=&quot;torso&quot;/</span><span class="token entity named-entity" style="color:#36acaa">&amp;gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token entity named-entity" style="color:#36acaa">&amp;lt;</span><span class="token plain">origin xyz=&quot;0 0 0.1&quot; rpy=&quot;0 0 0&quot;/</span><span class="token entity named-entity" style="color:#36acaa">&amp;gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token entity named-entity" style="color:#36acaa">&amp;lt;</span><span class="token plain">/joint</span><span class="token entity named-entity" style="color:#36acaa">&amp;gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token entity named-entity" style="color:#36acaa">&amp;lt;</span><span class="token plain">!-- Left leg chain --</span><span class="token entity named-entity" style="color:#36acaa">&amp;gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token entity named-entity" style="color:#36acaa">&amp;lt;</span><span class="token plain">link name=&quot;left_thigh&quot;</span><span class="token entity named-entity" style="color:#36acaa">&amp;gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token entity named-entity" style="color:#36acaa">&amp;lt;</span><span class="token plain">visual</span><span class="token entity named-entity" style="color:#36acaa">&amp;gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token entity named-entity" style="color:#36acaa">&amp;lt;</span><span class="token plain">origin xyz=&quot;0 0 -0.2&quot; rpy=&quot;0 0 0&quot;/</span><span class="token entity named-entity" style="color:#36acaa">&amp;gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token entity named-entity" style="color:#36acaa">&amp;lt;</span><span class="token plain">geometry</span><span class="token entity named-entity" style="color:#36acaa">&amp;gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token entity named-entity" style="color:#36acaa">&amp;lt;</span><span class="token plain">cylinder radius=&quot;0.05&quot; length=&quot;0.4&quot;/</span><span class="token entity named-entity" style="color:#36acaa">&amp;gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token entity named-entity" style="color:#36acaa">&amp;lt;</span><span class="token plain">/geometry</span><span class="token entity named-entity" style="color:#36acaa">&amp;gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token entity named-entity" style="color:#36acaa">&amp;lt;</span><span class="token plain">material name=&quot;grey&quot;/</span><span class="token entity named-entity" style="color:#36acaa">&amp;gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token entity named-entity" style="color:#36acaa">&amp;lt;</span><span class="token plain">/visual</span><span class="token entity named-entity" style="color:#36acaa">&amp;gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token entity named-entity" style="color:#36acaa">&amp;lt;</span><span class="token plain">collision</span><span class="token entity named-entity" style="color:#36acaa">&amp;gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token entity named-entity" style="color:#36acaa">&amp;lt;</span><span class="token plain">origin xyz=&quot;0 0 -0.2&quot; rpy=&quot;0 0 0&quot;/</span><span class="token entity named-entity" style="color:#36acaa">&amp;gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token entity named-entity" style="color:#36acaa">&amp;lt;</span><span class="token plain">geometry</span><span class="token entity named-entity" style="color:#36acaa">&amp;gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token entity named-entity" style="color:#36acaa">&amp;lt;</span><span class="token plain">cylinder radius=&quot;0.05&quot; length=&quot;0.4&quot;/</span><span class="token entity named-entity" style="color:#36acaa">&amp;gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token entity named-entity" style="color:#36acaa">&amp;lt;</span><span class="token plain">/geometry</span><span class="token entity named-entity" style="color:#36acaa">&amp;gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token entity named-entity" style="color:#36acaa">&amp;lt;</span><span class="token plain">/collision</span><span class="token entity named-entity" style="color:#36acaa">&amp;gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token entity named-entity" style="color:#36acaa">&amp;lt;</span><span class="token plain">inertial</span><span class="token entity named-entity" style="color:#36acaa">&amp;gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token entity named-entity" style="color:#36acaa">&amp;lt;</span><span class="token plain">origin xyz=&quot;0 0 -0.2&quot; rpy=&quot;0 0 0&quot;/</span><span class="token entity named-entity" style="color:#36acaa">&amp;gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token entity named-entity" style="color:#36acaa">&amp;lt;</span><span class="token plain">mass value=&quot;3.0&quot;/</span><span class="token entity named-entity" style="color:#36acaa">&amp;gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token entity named-entity" style="color:#36acaa">&amp;lt;</span><span class="token plain">inertia ixx=&quot;0.042&quot; ixy=&quot;0&quot; ixz=&quot;0&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">               iyy=&quot;0.042&quot; iyz=&quot;0&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">               izz=&quot;0.004&quot;/</span><span class="token entity named-entity" style="color:#36acaa">&amp;gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token entity named-entity" style="color:#36acaa">&amp;lt;</span><span class="token plain">/inertial</span><span class="token entity named-entity" style="color:#36acaa">&amp;gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token entity named-entity" style="color:#36acaa">&amp;lt;</span><span class="token plain">/link</span><span class="token entity named-entity" style="color:#36acaa">&amp;gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token entity named-entity" style="color:#36acaa">&amp;lt;</span><span class="token plain">joint name=&quot;left_hip_pitch&quot; type=&quot;revolute&quot;</span><span class="token entity named-entity" style="color:#36acaa">&amp;gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token entity named-entity" style="color:#36acaa">&amp;lt;</span><span class="token plain">parent link=&quot;pelvis&quot;/</span><span class="token entity named-entity" style="color:#36acaa">&amp;gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token entity named-entity" style="color:#36acaa">&amp;lt;</span><span class="token plain">child link=&quot;left_thigh&quot;/</span><span class="token entity named-entity" style="color:#36acaa">&amp;gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token entity named-entity" style="color:#36acaa">&amp;lt;</span><span class="token plain">origin xyz=&quot;0 0.1 -0.05&quot; rpy=&quot;0 0 0&quot;/</span><span class="token entity named-entity" style="color:#36acaa">&amp;gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token entity named-entity" style="color:#36acaa">&amp;lt;</span><span class="token plain">axis xyz=&quot;0 1 0&quot;/</span><span class="token entity named-entity" style="color:#36acaa">&amp;gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token entity named-entity" style="color:#36acaa">&amp;lt;</span><span class="token plain">limit lower=&quot;-1.57&quot; upper=&quot;1.57&quot; effort=&quot;150&quot; velocity=&quot;1.5&quot;/</span><span class="token entity named-entity" style="color:#36acaa">&amp;gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token entity named-entity" style="color:#36acaa">&amp;lt;</span><span class="token plain">dynamics damping=&quot;1.0&quot; friction=&quot;0.2&quot;/</span><span class="token entity named-entity" style="color:#36acaa">&amp;gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token entity named-entity" style="color:#36acaa">&amp;lt;</span><span class="token plain">/joint</span><span class="token entity named-entity" style="color:#36acaa">&amp;gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token entity named-entity" style="color:#36acaa">&amp;lt;</span><span class="token plain">link name=&quot;left_shin&quot;</span><span class="token entity named-entity" style="color:#36acaa">&amp;gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token entity named-entity" style="color:#36acaa">&amp;lt;</span><span class="token plain">visual</span><span class="token entity named-entity" style="color:#36acaa">&amp;gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token entity named-entity" style="color:#36acaa">&amp;lt;</span><span class="token plain">origin xyz=&quot;0 0 -0.2&quot; rpy=&quot;0 0 0&quot;/</span><span class="token entity named-entity" style="color:#36acaa">&amp;gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token entity named-entity" style="color:#36acaa">&amp;lt;</span><span class="token plain">geometry</span><span class="token entity named-entity" style="color:#36acaa">&amp;gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token entity named-entity" style="color:#36acaa">&amp;lt;</span><span class="token plain">cylinder radius=&quot;0.04&quot; length=&quot;0.4&quot;/</span><span class="token entity named-entity" style="color:#36acaa">&amp;gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token entity named-entity" style="color:#36acaa">&amp;lt;</span><span class="token plain">/geometry</span><span class="token entity named-entity" style="color:#36acaa">&amp;gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token entity named-entity" style="color:#36acaa">&amp;lt;</span><span class="token plain">material name=&quot;grey&quot;/</span><span class="token entity named-entity" style="color:#36acaa">&amp;gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token entity named-entity" style="color:#36acaa">&amp;lt;</span><span class="token plain">/visual</span><span class="token entity named-entity" style="color:#36acaa">&amp;gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token entity named-entity" style="color:#36acaa">&amp;lt;</span><span class="token plain">collision</span><span class="token entity named-entity" style="color:#36acaa">&amp;gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token entity named-entity" style="color:#36acaa">&amp;lt;</span><span class="token plain">origin xyz=&quot;0 0 -0.2&quot; rpy=&quot;0 0 0&quot;/</span><span class="token entity named-entity" style="color:#36acaa">&amp;gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token entity named-entity" style="color:#36acaa">&amp;lt;</span><span class="token plain">geometry</span><span class="token entity named-entity" style="color:#36acaa">&amp;gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token entity named-entity" style="color:#36acaa">&amp;lt;</span><span class="token plain">cylinder radius=&quot;0.04&quot; length=&quot;0.4&quot;/</span><span class="token entity named-entity" style="color:#36acaa">&amp;gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token entity named-entity" style="color:#36acaa">&amp;lt;</span><span class="token plain">/geometry</span><span class="token entity named-entity" style="color:#36acaa">&amp;gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token entity named-entity" style="color:#36acaa">&amp;lt;</span><span class="token plain">/collision</span><span class="token entity named-entity" style="color:#36acaa">&amp;gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token entity named-entity" style="color:#36acaa">&amp;lt;</span><span class="token plain">inertial</span><span class="token entity named-entity" style="color:#36acaa">&amp;gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token entity named-entity" style="color:#36acaa">&amp;lt;</span><span class="token plain">origin xyz=&quot;0 0 -0.2&quot; rpy=&quot;0 0 0&quot;/</span><span class="token entity named-entity" style="color:#36acaa">&amp;gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token entity named-entity" style="color:#36acaa">&amp;lt;</span><span class="token plain">mass value=&quot;2.0&quot;/</span><span class="token entity named-entity" style="color:#36acaa">&amp;gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token entity named-entity" style="color:#36acaa">&amp;lt;</span><span class="token plain">inertia ixx=&quot;0.028&quot; ixy=&quot;0&quot; ixz=&quot;0&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">               iyy=&quot;0.028&quot; iyz=&quot;0&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">               izz=&quot;0.002&quot;/</span><span class="token entity named-entity" style="color:#36acaa">&amp;gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token entity named-entity" style="color:#36acaa">&amp;lt;</span><span class="token plain">/inertial</span><span class="token entity named-entity" style="color:#36acaa">&amp;gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token entity named-entity" style="color:#36acaa">&amp;lt;</span><span class="token plain">/link</span><span class="token entity named-entity" style="color:#36acaa">&amp;gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token entity named-entity" style="color:#36acaa">&amp;lt;</span><span class="token plain">joint name=&quot;left_knee&quot; type=&quot;revolute&quot;</span><span class="token entity named-entity" style="color:#36acaa">&amp;gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token entity named-entity" style="color:#36acaa">&amp;lt;</span><span class="token plain">parent link=&quot;left_thigh&quot;/</span><span class="token entity named-entity" style="color:#36acaa">&amp;gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token entity named-entity" style="color:#36acaa">&amp;lt;</span><span class="token plain">child link=&quot;left_shin&quot;/</span><span class="token entity named-entity" style="color:#36acaa">&amp;gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token entity named-entity" style="color:#36acaa">&amp;lt;</span><span class="token plain">origin xyz=&quot;0 0 -0.4&quot; rpy=&quot;0 0 0&quot;/</span><span class="token entity named-entity" style="color:#36acaa">&amp;gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token entity named-entity" style="color:#36acaa">&amp;lt;</span><span class="token plain">axis xyz=&quot;0 1 0&quot;/</span><span class="token entity named-entity" style="color:#36acaa">&amp;gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token entity named-entity" style="color:#36acaa">&amp;lt;</span><span class="token plain">limit lower=&quot;0&quot; upper=&quot;2.35&quot; effort=&quot;150&quot; velocity=&quot;2.0&quot;/</span><span class="token entity named-entity" style="color:#36acaa">&amp;gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token entity named-entity" style="color:#36acaa">&amp;lt;</span><span class="token plain">dynamics damping=&quot;0.5&quot; friction=&quot;0.1&quot;/</span><span class="token entity named-entity" style="color:#36acaa">&amp;gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token entity named-entity" style="color:#36acaa">&amp;lt;</span><span class="token plain">/joint</span><span class="token entity named-entity" style="color:#36acaa">&amp;gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token entity named-entity" style="color:#36acaa">&amp;lt;</span><span class="token plain">link name=&quot;left_foot&quot;</span><span class="token entity named-entity" style="color:#36acaa">&amp;gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token entity named-entity" style="color:#36acaa">&amp;lt;</span><span class="token plain">visual</span><span class="token entity named-entity" style="color:#36acaa">&amp;gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token entity named-entity" style="color:#36acaa">&amp;lt;</span><span class="token plain">origin xyz=&quot;0.05 0 -0.025&quot; rpy=&quot;0 0 0&quot;/</span><span class="token entity named-entity" style="color:#36acaa">&amp;gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token entity named-entity" style="color:#36acaa">&amp;lt;</span><span class="token plain">geometry</span><span class="token entity named-entity" style="color:#36acaa">&amp;gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token entity named-entity" style="color:#36acaa">&amp;lt;</span><span class="token plain">box size=&quot;0.2 0.1 0.05&quot;/</span><span class="token entity named-entity" style="color:#36acaa">&amp;gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token entity named-entity" style="color:#36acaa">&amp;lt;</span><span class="token plain">/geometry</span><span class="token entity named-entity" style="color:#36acaa">&amp;gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token entity named-entity" style="color:#36acaa">&amp;lt;</span><span class="token plain">material name=&quot;grey&quot;/</span><span class="token entity named-entity" style="color:#36acaa">&amp;gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token entity named-entity" style="color:#36acaa">&amp;lt;</span><span class="token plain">/visual</span><span class="token entity named-entity" style="color:#36acaa">&amp;gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token entity named-entity" style="color:#36acaa">&amp;lt;</span><span class="token plain">collision</span><span class="token entity named-entity" style="color:#36acaa">&amp;gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token entity named-entity" style="color:#36acaa">&amp;lt;</span><span class="token plain">origin xyz=&quot;0.05 0 -0.025&quot; rpy=&quot;0 0 0&quot;/</span><span class="token entity named-entity" style="color:#36acaa">&amp;gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token entity named-entity" style="color:#36acaa">&amp;lt;</span><span class="token plain">geometry</span><span class="token entity named-entity" style="color:#36acaa">&amp;gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token entity named-entity" style="color:#36acaa">&amp;lt;</span><span class="token plain">box size=&quot;0.2 0.1 0.05&quot;/</span><span class="token entity named-entity" style="color:#36acaa">&amp;gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token entity named-entity" style="color:#36acaa">&amp;lt;</span><span class="token plain">/geometry</span><span class="token entity named-entity" style="color:#36acaa">&amp;gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token entity named-entity" style="color:#36acaa">&amp;lt;</span><span class="token plain">/collision</span><span class="token entity named-entity" style="color:#36acaa">&amp;gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token entity named-entity" style="color:#36acaa">&amp;lt;</span><span class="token plain">inertial</span><span class="token entity named-entity" style="color:#36acaa">&amp;gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token entity named-entity" style="color:#36acaa">&amp;lt;</span><span class="token plain">origin xyz=&quot;0.05 0 -0.025&quot; rpy=&quot;0 0 0&quot;/</span><span class="token entity named-entity" style="color:#36acaa">&amp;gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token entity named-entity" style="color:#36acaa">&amp;lt;</span><span class="token plain">mass value=&quot;1.0&quot;/</span><span class="token entity named-entity" style="color:#36acaa">&amp;gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token entity named-entity" style="color:#36acaa">&amp;lt;</span><span class="token plain">inertia ixx=&quot;0.001&quot; ixy=&quot;0&quot; ixz=&quot;0&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">               iyy=&quot;0.004&quot; iyz=&quot;0&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">               izz=&quot;0.004&quot;/</span><span class="token entity named-entity" style="color:#36acaa">&amp;gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token entity named-entity" style="color:#36acaa">&amp;lt;</span><span class="token plain">/inertial</span><span class="token entity named-entity" style="color:#36acaa">&amp;gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token entity named-entity" style="color:#36acaa">&amp;lt;</span><span class="token plain">/link</span><span class="token entity named-entity" style="color:#36acaa">&amp;gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token entity named-entity" style="color:#36acaa">&amp;lt;</span><span class="token plain">joint name=&quot;left_ankle_pitch&quot; type=&quot;revolute&quot;</span><span class="token entity named-entity" style="color:#36acaa">&amp;gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token entity named-entity" style="color:#36acaa">&amp;lt;</span><span class="token plain">parent link=&quot;left_shin&quot;/</span><span class="token entity named-entity" style="color:#36acaa">&amp;gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token entity named-entity" style="color:#36acaa">&amp;lt;</span><span class="token plain">child link=&quot;left_foot&quot;/</span><span class="token entity named-entity" style="color:#36acaa">&amp;gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token entity named-entity" style="color:#36acaa">&amp;lt;</span><span class="token plain">origin xyz=&quot;0 0 -0.4&quot; rpy=&quot;0 0 0&quot;/</span><span class="token entity named-entity" style="color:#36acaa">&amp;gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token entity named-entity" style="color:#36acaa">&amp;lt;</span><span class="token plain">axis xyz=&quot;0 1 0&quot;/</span><span class="token entity named-entity" style="color:#36acaa">&amp;gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token entity named-entity" style="color:#36acaa">&amp;lt;</span><span class="token plain">limit lower=&quot;-0.785&quot; upper=&quot;0.785&quot; effort=&quot;100&quot; velocity=&quot;2.0&quot;/</span><span class="token entity named-entity" style="color:#36acaa">&amp;gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token entity named-entity" style="color:#36acaa">&amp;lt;</span><span class="token plain">dynamics damping=&quot;0.5&quot; friction=&quot;0.1&quot;/</span><span class="token entity named-entity" style="color:#36acaa">&amp;gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token entity named-entity" style="color:#36acaa">&amp;lt;</span><span class="token plain">/joint</span><span class="token entity named-entity" style="color:#36acaa">&amp;gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token entity named-entity" style="color:#36acaa">&amp;lt;</span><span class="token plain">!-- Right leg chain (mirrored) --</span><span class="token entity named-entity" style="color:#36acaa">&amp;gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token entity named-entity" style="color:#36acaa">&amp;lt;</span><span class="token plain">link name=&quot;right_thigh&quot;</span><span class="token entity named-entity" style="color:#36acaa">&amp;gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token entity named-entity" style="color:#36acaa">&amp;lt;</span><span class="token plain">visual</span><span class="token entity named-entity" style="color:#36acaa">&amp;gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token entity named-entity" style="color:#36acaa">&amp;lt;</span><span class="token plain">origin xyz=&quot;0 0 -0.2&quot; rpy=&quot;0 0 0&quot;/</span><span class="token entity named-entity" style="color:#36acaa">&amp;gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token entity named-entity" style="color:#36acaa">&amp;lt;</span><span class="token plain">geometry</span><span class="token entity named-entity" style="color:#36acaa">&amp;gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token entity named-entity" style="color:#36acaa">&amp;lt;</span><span class="token plain">cylinder radius=&quot;0.05&quot; length=&quot;0.4&quot;/</span><span class="token entity named-entity" style="color:#36acaa">&amp;gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token entity named-entity" style="color:#36acaa">&amp;lt;</span><span class="token plain">/geometry</span><span class="token entity named-entity" style="color:#36acaa">&amp;gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token entity named-entity" style="color:#36acaa">&amp;lt;</span><span class="token plain">material name=&quot;grey&quot;/</span><span class="token entity named-entity" style="color:#36acaa">&amp;gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token entity named-entity" style="color:#36acaa">&amp;lt;</span><span class="token plain">/visual</span><span class="token entity named-entity" style="color:#36acaa">&amp;gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token entity named-entity" style="color:#36acaa">&amp;lt;</span><span class="token plain">collision</span><span class="token entity named-entity" style="color:#36acaa">&amp;gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token entity named-entity" style="color:#36acaa">&amp;lt;</span><span class="token plain">origin xyz=&quot;0 0 -0.2&quot; rpy=&quot;0 0 0&quot;/</span><span class="token entity named-entity" style="color:#36acaa">&amp;gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token entity named-entity" style="color:#36acaa">&amp;lt;</span><span class="token plain">geometry</span><span class="token entity named-entity" style="color:#36acaa">&amp;gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token entity named-entity" style="color:#36acaa">&amp;lt;</span><span class="token plain">cylinder radius=&quot;0.05&quot; length=&quot;0.4&quot;/</span><span class="token entity named-entity" style="color:#36acaa">&amp;gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token entity named-entity" style="color:#36acaa">&amp;lt;</span><span class="token plain">/geometry</span><span class="token entity named-entity" style="color:#36acaa">&amp;gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token entity named-entity" style="color:#36acaa">&amp;lt;</span><span class="token plain">/collision</span><span class="token entity named-entity" style="color:#36acaa">&amp;gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token entity named-entity" style="color:#36acaa">&amp;lt;</span><span class="token plain">inertial</span><span class="token entity named-entity" style="color:#36acaa">&amp;gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token entity named-entity" style="color:#36acaa">&amp;lt;</span><span class="token plain">origin xyz=&quot;0 0 -0.2&quot; rpy=&quot;0 0 0&quot;/</span><span class="token entity named-entity" style="color:#36acaa">&amp;gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token entity named-entity" style="color:#36acaa">&amp;lt;</span><span class="token plain">mass value=&quot;3.0&quot;/</span><span class="token entity named-entity" style="color:#36acaa">&amp;gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token entity named-entity" style="color:#36acaa">&amp;lt;</span><span class="token plain">inertia ixx=&quot;0.042&quot; ixy=&quot;0&quot; ixz=&quot;0&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">               iyy=&quot;0.042&quot; iyz=&quot;0&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">               izz=&quot;0.004&quot;/</span><span class="token entity named-entity" style="color:#36acaa">&amp;gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token entity named-entity" style="color:#36acaa">&amp;lt;</span><span class="token plain">/inertial</span><span class="token entity named-entity" style="color:#36acaa">&amp;gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token entity named-entity" style="color:#36acaa">&amp;lt;</span><span class="token plain">/link</span><span class="token entity named-entity" style="color:#36acaa">&amp;gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token entity named-entity" style="color:#36acaa">&amp;lt;</span><span class="token plain">joint name=&quot;right_hip_pitch&quot; type=&quot;revolute&quot;</span><span class="token entity named-entity" style="color:#36acaa">&amp;gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token entity named-entity" style="color:#36acaa">&amp;lt;</span><span class="token plain">parent link=&quot;pelvis&quot;/</span><span class="token entity named-entity" style="color:#36acaa">&amp;gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token entity named-entity" style="color:#36acaa">&amp;lt;</span><span class="token plain">child link=&quot;right_thigh&quot;/</span><span class="token entity named-entity" style="color:#36acaa">&amp;gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token entity named-entity" style="color:#36acaa">&amp;lt;</span><span class="token plain">origin xyz=&quot;0 -0.1 -0.05&quot; rpy=&quot;0 0 0&quot;/</span><span class="token entity named-entity" style="color:#36acaa">&amp;gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token entity named-entity" style="color:#36acaa">&amp;lt;</span><span class="token plain">axis xyz=&quot;0 1 0&quot;/</span><span class="token entity named-entity" style="color:#36acaa">&amp;gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token entity named-entity" style="color:#36acaa">&amp;lt;</span><span class="token plain">limit lower=&quot;-1.57&quot; upper=&quot;1.57&quot; effort=&quot;150&quot; velocity=&quot;1.5&quot;/</span><span class="token entity named-entity" style="color:#36acaa">&amp;gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token entity named-entity" style="color:#36acaa">&amp;lt;</span><span class="token plain">dynamics damping=&quot;1.0&quot; friction=&quot;0.2&quot;/</span><span class="token entity named-entity" style="color:#36acaa">&amp;gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token entity named-entity" style="color:#36acaa">&amp;lt;</span><span class="token plain">/joint</span><span class="token entity named-entity" style="color:#36acaa">&amp;gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token entity named-entity" style="color:#36acaa">&amp;lt;</span><span class="token plain">link name=&quot;right_shin&quot;</span><span class="token entity named-entity" style="color:#36acaa">&amp;gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token entity named-entity" style="color:#36acaa">&amp;lt;</span><span class="token plain">visual</span><span class="token entity named-entity" style="color:#36acaa">&amp;gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token entity named-entity" style="color:#36acaa">&amp;lt;</span><span class="token plain">origin xyz=&quot;0 0 -0.2&quot; rpy=&quot;0 0 0&quot;/</span><span class="token entity named-entity" style="color:#36acaa">&amp;gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token entity named-entity" style="color:#36acaa">&amp;lt;</span><span class="token plain">geometry</span><span class="token entity named-entity" style="color:#36acaa">&amp;gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token entity named-entity" style="color:#36acaa">&amp;lt;</span><span class="token plain">cylinder radius=&quot;0.04&quot; length=&quot;0.4&quot;/</span><span class="token entity named-entity" style="color:#36acaa">&amp;gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token entity named-entity" style="color:#36acaa">&amp;lt;</span><span class="token plain">/geometry</span><span class="token entity named-entity" style="color:#36acaa">&amp;gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token entity named-entity" style="color:#36acaa">&amp;lt;</span><span class="token plain">material name=&quot;grey&quot;/</span><span class="token entity named-entity" style="color:#36acaa">&amp;gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token entity named-entity" style="color:#36acaa">&amp;lt;</span><span class="token plain">/visual</span><span class="token entity named-entity" style="color:#36acaa">&amp;gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token entity named-entity" style="color:#36acaa">&amp;lt;</span><span class="token plain">collision</span><span class="token entity named-entity" style="color:#36acaa">&amp;gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token entity named-entity" style="color:#36acaa">&amp;lt;</span><span class="token plain">origin xyz=&quot;0 0 -0.2&quot; rpy=&quot;0 0 0&quot;/</span><span class="token entity named-entity" style="color:#36acaa">&amp;gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token entity named-entity" style="color:#36acaa">&amp;lt;</span><span class="token plain">geometry</span><span class="token entity named-entity" style="color:#36acaa">&amp;gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token entity named-entity" style="color:#36acaa">&amp;lt;</span><span class="token plain">cylinder radius=&quot;0.04&quot; length=&quot;0.4&quot;/</span><span class="token entity named-entity" style="color:#36acaa">&amp;gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token entity named-entity" style="color:#36acaa">&amp;lt;</span><span class="token plain">/geometry</span><span class="token entity named-entity" style="color:#36acaa">&amp;gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token entity named-entity" style="color:#36acaa">&amp;lt;</span><span class="token plain">/collision</span><span class="token entity named-entity" style="color:#36acaa">&amp;gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token entity named-entity" style="color:#36acaa">&amp;lt;</span><span class="token plain">inertial</span><span class="token entity named-entity" style="color:#36acaa">&amp;gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token entity named-entity" style="color:#36acaa">&amp;lt;</span><span class="token plain">origin xyz=&quot;0 0 -0.2&quot; rpy=&quot;0 0 0&quot;/</span><span class="token entity named-entity" style="color:#36acaa">&amp;gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token entity named-entity" style="color:#36acaa">&amp;lt;</span><span class="token plain">mass value=&quot;2.0&quot;/</span><span class="token entity named-entity" style="color:#36acaa">&amp;gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token entity named-entity" style="color:#36acaa">&amp;lt;</span><span class="token plain">inertia ixx=&quot;0.028&quot; ixy=&quot;0&quot; ixz=&quot;0&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">               iyy=&quot;0.028&quot; iyz=&quot;0&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">               izz=&quot;0.002&quot;/</span><span class="token entity named-entity" style="color:#36acaa">&amp;gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token entity named-entity" style="color:#36acaa">&amp;lt;</span><span class="token plain">/inertial</span><span class="token entity named-entity" style="color:#36acaa">&amp;gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token entity named-entity" style="color:#36acaa">&amp;lt;</span><span class="token plain">/link</span><span class="token entity named-entity" style="color:#36acaa">&amp;gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token entity named-entity" style="color:#36acaa">&amp;lt;</span><span class="token plain">joint name=&quot;right_knee&quot; type=&quot;revolute&quot;</span><span class="token entity named-entity" style="color:#36acaa">&amp;gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token entity named-entity" style="color:#36acaa">&amp;lt;</span><span class="token plain">parent link=&quot;right_thigh&quot;/</span><span class="token entity named-entity" style="color:#36acaa">&amp;gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token entity named-entity" style="color:#36acaa">&amp;lt;</span><span class="token plain">child link=&quot;right_shin&quot;/</span><span class="token entity named-entity" style="color:#36acaa">&amp;gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token entity named-entity" style="color:#36acaa">&amp;lt;</span><span class="token plain">origin xyz=&quot;0 0 -0.4&quot; rpy=&quot;0 0 0&quot;/</span><span class="token entity named-entity" style="color:#36acaa">&amp;gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token entity named-entity" style="color:#36acaa">&amp;lt;</span><span class="token plain">axis xyz=&quot;0 1 0&quot;/</span><span class="token entity named-entity" style="color:#36acaa">&amp;gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token entity named-entity" style="color:#36acaa">&amp;lt;</span><span class="token plain">limit lower=&quot;0&quot; upper=&quot;2.35&quot; effort=&quot;150&quot; velocity=&quot;2.0&quot;/</span><span class="token entity named-entity" style="color:#36acaa">&amp;gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token entity named-entity" style="color:#36acaa">&amp;lt;</span><span class="token plain">dynamics damping=&quot;0.5&quot; friction=&quot;0.1&quot;/</span><span class="token entity named-entity" style="color:#36acaa">&amp;gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token entity named-entity" style="color:#36acaa">&amp;lt;</span><span class="token plain">/joint</span><span class="token entity named-entity" style="color:#36acaa">&amp;gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token entity named-entity" style="color:#36acaa">&amp;lt;</span><span class="token plain">link name=&quot;right_foot&quot;</span><span class="token entity named-entity" style="color:#36acaa">&amp;gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token entity named-entity" style="color:#36acaa">&amp;lt;</span><span class="token plain">visual</span><span class="token entity named-entity" style="color:#36acaa">&amp;gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token entity named-entity" style="color:#36acaa">&amp;lt;</span><span class="token plain">origin xyz=&quot;0.05 0 -0.025&quot; rpy=&quot;0 0 0&quot;/</span><span class="token entity named-entity" style="color:#36acaa">&amp;gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token entity named-entity" style="color:#36acaa">&amp;lt;</span><span class="token plain">geometry</span><span class="token entity named-entity" style="color:#36acaa">&amp;gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token entity named-entity" style="color:#36acaa">&amp;lt;</span><span class="token plain">box size=&quot;0.2 0.1 0.05&quot;/</span><span class="token entity named-entity" style="color:#36acaa">&amp;gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token entity named-entity" style="color:#36acaa">&amp;lt;</span><span class="token plain">/geometry</span><span class="token entity named-entity" style="color:#36acaa">&amp;gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token entity named-entity" style="color:#36acaa">&amp;lt;</span><span class="token plain">material name=&quot;grey&quot;/</span><span class="token entity named-entity" style="color:#36acaa">&amp;gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token entity named-entity" style="color:#36acaa">&amp;lt;</span><span class="token plain">/visual</span><span class="token entity named-entity" style="color:#36acaa">&amp;gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token entity named-entity" style="color:#36acaa">&amp;lt;</span><span class="token plain">collision</span><span class="token entity named-entity" style="color:#36acaa">&amp;gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token entity named-entity" style="color:#36acaa">&amp;lt;</span><span class="token plain">origin xyz=&quot;0.05 0 -0.025&quot; rpy=&quot;0 0 0&quot;/</span><span class="token entity named-entity" style="color:#36acaa">&amp;gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token entity named-entity" style="color:#36acaa">&amp;lt;</span><span class="token plain">geometry</span><span class="token entity named-entity" style="color:#36acaa">&amp;gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token entity named-entity" style="color:#36acaa">&amp;lt;</span><span class="token plain">box size=&quot;0.2 0.1 0.05&quot;/</span><span class="token entity named-entity" style="color:#36acaa">&amp;gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token entity named-entity" style="color:#36acaa">&amp;lt;</span><span class="token plain">/geometry</span><span class="token entity named-entity" style="color:#36acaa">&amp;gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token entity named-entity" style="color:#36acaa">&amp;lt;</span><span class="token plain">/collision</span><span class="token entity named-entity" style="color:#36acaa">&amp;gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token entity named-entity" style="color:#36acaa">&amp;lt;</span><span class="token plain">inertial</span><span class="token entity named-entity" style="color:#36acaa">&amp;gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token entity named-entity" style="color:#36acaa">&amp;lt;</span><span class="token plain">origin xyz=&quot;0.05 0 -0.025&quot; rpy=&quot;0 0 0&quot;/</span><span class="token entity named-entity" style="color:#36acaa">&amp;gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token entity named-entity" style="color:#36acaa">&amp;lt;</span><span class="token plain">mass value=&quot;1.0&quot;/</span><span class="token entity named-entity" style="color:#36acaa">&amp;gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token entity named-entity" style="color:#36acaa">&amp;lt;</span><span class="token plain">inertia ixx=&quot;0.001&quot; ixy=&quot;0&quot; ixz=&quot;0&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">               iyy=&quot;0.004&quot; iyz=&quot;0&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">               izz=&quot;0.004&quot;/</span><span class="token entity named-entity" style="color:#36acaa">&amp;gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token entity named-entity" style="color:#36acaa">&amp;lt;</span><span class="token plain">/inertial</span><span class="token entity named-entity" style="color:#36acaa">&amp;gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token entity named-entity" style="color:#36acaa">&amp;lt;</span><span class="token plain">/link</span><span class="token entity named-entity" style="color:#36acaa">&amp;gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token entity named-entity" style="color:#36acaa">&amp;lt;</span><span class="token plain">joint name=&quot;right_ankle_pitch&quot; type=&quot;revolute&quot;</span><span class="token entity named-entity" style="color:#36acaa">&amp;gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token entity named-entity" style="color:#36acaa">&amp;lt;</span><span class="token plain">parent link=&quot;right_shin&quot;/</span><span class="token entity named-entity" style="color:#36acaa">&amp;gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token entity named-entity" style="color:#36acaa">&amp;lt;</span><span class="token plain">child link=&quot;right_foot&quot;/</span><span class="token entity named-entity" style="color:#36acaa">&amp;gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token entity named-entity" style="color:#36acaa">&amp;lt;</span><span class="token plain">origin xyz=&quot;0 0 -0.4&quot; rpy=&quot;0 0 0&quot;/</span><span class="token entity named-entity" style="color:#36acaa">&amp;gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token entity named-entity" style="color:#36acaa">&amp;lt;</span><span class="token plain">axis xyz=&quot;0 1 0&quot;/</span><span class="token entity named-entity" style="color:#36acaa">&amp;gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token entity named-entity" style="color:#36acaa">&amp;lt;</span><span class="token plain">limit lower=&quot;-0.785&quot; upper=&quot;0.785&quot; effort=&quot;100&quot; velocity=&quot;2.0&quot;/</span><span class="token entity named-entity" style="color:#36acaa">&amp;gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token entity named-entity" style="color:#36acaa">&amp;lt;</span><span class="token plain">dynamics damping=&quot;0.5&quot; friction=&quot;0.1&quot;/</span><span class="token entity named-entity" style="color:#36acaa">&amp;gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token entity named-entity" style="color:#36acaa">&amp;lt;</span><span class="token plain">/joint</span><span class="token entity named-entity" style="color:#36acaa">&amp;gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token entity named-entity" style="color:#36acaa">&amp;lt;</span><span class="token plain">!-- Gazebo foot contact properties --</span><span class="token entity named-entity" style="color:#36acaa">&amp;gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token entity named-entity" style="color:#36acaa">&amp;lt;</span><span class="token plain">gazebo reference=&quot;left_foot&quot;</span><span class="token entity named-entity" style="color:#36acaa">&amp;gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token entity named-entity" style="color:#36acaa">&amp;lt;</span><span class="token plain">mu1</span><span class="token entity named-entity" style="color:#36acaa">&amp;gt;</span><span class="token plain">1.0</span><span class="token entity named-entity" style="color:#36acaa">&amp;lt;</span><span class="token plain">/mu1</span><span class="token entity named-entity" style="color:#36acaa">&amp;gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token entity named-entity" style="color:#36acaa">&amp;lt;</span><span class="token plain">mu2</span><span class="token entity named-entity" style="color:#36acaa">&amp;gt;</span><span class="token plain">1.0</span><span class="token entity named-entity" style="color:#36acaa">&amp;lt;</span><span class="token plain">/mu2</span><span class="token entity named-entity" style="color:#36acaa">&amp;gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token entity named-entity" style="color:#36acaa">&amp;lt;</span><span class="token plain">kp</span><span class="token entity named-entity" style="color:#36acaa">&amp;gt;</span><span class="token plain">1000000.0</span><span class="token entity named-entity" style="color:#36acaa">&amp;lt;</span><span class="token plain">/kp</span><span class="token entity named-entity" style="color:#36acaa">&amp;gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token entity named-entity" style="color:#36acaa">&amp;lt;</span><span class="token plain">kd</span><span class="token entity named-entity" style="color:#36acaa">&amp;gt;</span><span class="token plain">100.0</span><span class="token entity named-entity" style="color:#36acaa">&amp;lt;</span><span class="token plain">/kd</span><span class="token entity named-entity" style="color:#36acaa">&amp;gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token entity named-entity" style="color:#36acaa">&amp;lt;</span><span class="token plain">minDepth</span><span class="token entity named-entity" style="color:#36acaa">&amp;gt;</span><span class="token plain">0.001</span><span class="token entity named-entity" style="color:#36acaa">&amp;lt;</span><span class="token plain">/minDepth</span><span class="token entity named-entity" style="color:#36acaa">&amp;gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token entity named-entity" style="color:#36acaa">&amp;lt;</span><span class="token plain">material</span><span class="token entity named-entity" style="color:#36acaa">&amp;gt;</span><span class="token plain">Gazebo/Grey</span><span class="token entity named-entity" style="color:#36acaa">&amp;lt;</span><span class="token plain">/material</span><span class="token entity named-entity" style="color:#36acaa">&amp;gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token entity named-entity" style="color:#36acaa">&amp;lt;</span><span class="token plain">/gazebo</span><span class="token entity named-entity" style="color:#36acaa">&amp;gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token entity named-entity" style="color:#36acaa">&amp;lt;</span><span class="token plain">gazebo reference=&quot;right_foot&quot;</span><span class="token entity named-entity" style="color:#36acaa">&amp;gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token entity named-entity" style="color:#36acaa">&amp;lt;</span><span class="token plain">mu1</span><span class="token entity named-entity" style="color:#36acaa">&amp;gt;</span><span class="token plain">1.0</span><span class="token entity named-entity" style="color:#36acaa">&amp;lt;</span><span class="token plain">/mu1</span><span class="token entity named-entity" style="color:#36acaa">&amp;gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token entity named-entity" style="color:#36acaa">&amp;lt;</span><span class="token plain">mu2</span><span class="token entity named-entity" style="color:#36acaa">&amp;gt;</span><span class="token plain">1.0</span><span class="token entity named-entity" style="color:#36acaa">&amp;lt;</span><span class="token plain">/mu2</span><span class="token entity named-entity" style="color:#36acaa">&amp;gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token entity named-entity" style="color:#36acaa">&amp;lt;</span><span class="token plain">kp</span><span class="token entity named-entity" style="color:#36acaa">&amp;gt;</span><span class="token plain">1000000.0</span><span class="token entity named-entity" style="color:#36acaa">&amp;lt;</span><span class="token plain">/kp</span><span class="token entity named-entity" style="color:#36acaa">&amp;gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token entity named-entity" style="color:#36acaa">&amp;lt;</span><span class="token plain">kd</span><span class="token entity named-entity" style="color:#36acaa">&amp;gt;</span><span class="token plain">100.0</span><span class="token entity named-entity" style="color:#36acaa">&amp;lt;</span><span class="token plain">/kd</span><span class="token entity named-entity" style="color:#36acaa">&amp;gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token entity named-entity" style="color:#36acaa">&amp;lt;</span><span class="token plain">minDepth</span><span class="token entity named-entity" style="color:#36acaa">&amp;gt;</span><span class="token plain">0.001</span><span class="token entity named-entity" style="color:#36acaa">&amp;lt;</span><span class="token plain">/minDepth</span><span class="token entity named-entity" style="color:#36acaa">&amp;gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token entity named-entity" style="color:#36acaa">&amp;lt;</span><span class="token plain">material</span><span class="token entity named-entity" style="color:#36acaa">&amp;gt;</span><span class="token plain">Gazebo/Grey</span><span class="token entity named-entity" style="color:#36acaa">&amp;lt;</span><span class="token plain">/material</span><span class="token entity named-entity" style="color:#36acaa">&amp;gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token entity named-entity" style="color:#36acaa">&amp;lt;</span><span class="token plain">/gazebo</span><span class="token entity named-entity" style="color:#36acaa">&amp;gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token entity named-entity" style="color:#36acaa">&amp;lt;</span><span class="token plain">/robot</span><span class="token entity named-entity" style="color:#36acaa">&amp;gt;</span><br></span></code></pre></div></div>
<p><strong>Key Implementation Points:</strong></p>
<ul>
<li class="">The humanoid has a total mass of ~27 kg distributed across pelvis (5 kg), torso (10 kg), thighs (6 kg), shins (4 kg), and feet (2 kg)</li>
<li class="">Joint limits match human biomechanics: hip pitch ¬±90¬∞, knee 0-135¬∞, ankle pitch ¬±45¬∞</li>
<li class="">Foot contact properties (high friction, stiffness) prevent slippage during walking</li>
<li class="">The CoM height is approximately 0.8 m (pelvis) + 0.35 m (torso/legs) = 0.6-0.7 m depending on joint configuration</li>
</ul>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="common-challenges-and-solutions">Common Challenges and Solutions<a href="#common-challenges-and-solutions" class="hash-link" aria-label="Direct link to Common Challenges and Solutions" title="Direct link to Common Challenges and Solutions" translate="no">‚Äã</a></h2>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="challenge-1-unstable-simulation-due-to-high-contact-stiffness">Challenge 1: Unstable Simulation Due to High Contact Stiffness<a href="#challenge-1-unstable-simulation-due-to-high-contact-stiffness" class="hash-link" aria-label="Direct link to Challenge 1: Unstable Simulation Due to High Contact Stiffness" title="Direct link to Challenge 1: Unstable Simulation Due to High Contact Stiffness" translate="no">‚Äã</a></h3>
<p><strong>Problem</strong>: When simulating humanoid robots in Gazebo, overly high contact stiffness (kp) values can cause numerical instability, vibration, or jittering when the feet are on the ground.</p>
<p><strong>Solution</strong>: Reduce contact stiffness to 1e5-1e6 range and increase contact damping (kd) to 10-100. Also reduce the simulation timestep (e.g., from 1 ms to 0.5 ms) to improve numerical stability. In Gazebo, set:</p>
<div class="language-xml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-xml codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token entity named-entity" style="color:#36acaa">&amp;lt;</span><span class="token plain">gazebo reference=&quot;foot_link&quot;</span><span class="token entity named-entity" style="color:#36acaa">&amp;gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token entity named-entity" style="color:#36acaa">&amp;lt;</span><span class="token plain">kp</span><span class="token entity named-entity" style="color:#36acaa">&amp;gt;</span><span class="token plain">100000.0</span><span class="token entity named-entity" style="color:#36acaa">&amp;lt;</span><span class="token plain">/kp</span><span class="token entity named-entity" style="color:#36acaa">&amp;gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token entity named-entity" style="color:#36acaa">&amp;lt;</span><span class="token plain">kd</span><span class="token entity named-entity" style="color:#36acaa">&amp;gt;</span><span class="token plain">10.0</span><span class="token entity named-entity" style="color:#36acaa">&amp;lt;</span><span class="token plain">/kd</span><span class="token entity named-entity" style="color:#36acaa">&amp;gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token entity named-entity" style="color:#36acaa">&amp;lt;</span><span class="token plain">/gazebo</span><span class="token entity named-entity" style="color:#36acaa">&amp;gt;</span><br></span></code></pre></div></div>
<p>And in your world file:</p>
<div class="language-xml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-xml codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token entity named-entity" style="color:#36acaa">&amp;lt;</span><span class="token plain">physics type=&quot;ode&quot;</span><span class="token entity named-entity" style="color:#36acaa">&amp;gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token entity named-entity" style="color:#36acaa">&amp;lt;</span><span class="token plain">max_step_size</span><span class="token entity named-entity" style="color:#36acaa">&amp;gt;</span><span class="token plain">0.0005</span><span class="token entity named-entity" style="color:#36acaa">&amp;lt;</span><span class="token plain">/max_step_size</span><span class="token entity named-entity" style="color:#36acaa">&amp;gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token entity named-entity" style="color:#36acaa">&amp;lt;</span><span class="token plain">real_time_update_rate</span><span class="token entity named-entity" style="color:#36acaa">&amp;gt;</span><span class="token plain">2000</span><span class="token entity named-entity" style="color:#36acaa">&amp;lt;</span><span class="token plain">/real_time_update_rate</span><span class="token entity named-entity" style="color:#36acaa">&amp;gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token entity named-entity" style="color:#36acaa">&amp;lt;</span><span class="token plain">/physics</span><span class="token entity named-entity" style="color:#36acaa">&amp;gt;</span><br></span></code></pre></div></div>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="challenge-2-incorrect-center-of-mass-causing-balance-issues">Challenge 2: Incorrect Center of Mass Causing Balance Issues<a href="#challenge-2-incorrect-center-of-mass-causing-balance-issues" class="hash-link" aria-label="Direct link to Challenge 2: Incorrect Center of Mass Causing Balance Issues" title="Direct link to Challenge 2: Incorrect Center of Mass Causing Balance Issues" translate="no">‚Äã</a></h3>
<p><strong>Problem</strong>: The robot tips over unexpectedly during simulation because the URDF&#x27;s inertial properties don&#x27;t match the physical design, leading to an incorrect CoM position.</p>
<p><strong>Solution</strong>: Use CAD software or physics simulation tools to compute accurate mass, center of mass, and inertia tensor for each link. For complex shapes, export mesh files and use tools like <code>meshlab</code> or Python libraries (<code>trimesh</code>, <code>pymesh</code>) to compute inertial properties. Verify the CoM position using the ROS 2 <code>robot_state_publisher</code> and a visualization tool like RViz, which can display the CoM marker.</p>
<p>Example using trimesh:</p>
<div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> trimesh</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">mesh </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> trimesh</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">load</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;thigh_link.stl&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">mesh</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">density </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1050</span><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic"># kg/m¬≥ (plastic density)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">mass </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> mesh</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">mass</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">com </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> mesh</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">center_mass</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">inertia </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> mesh</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">moment_inertia</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">print</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string-interpolation string" style="color:#e3116c">f&quot;Mass: </span><span class="token string-interpolation interpolation punctuation" style="color:#393A34">{</span><span class="token string-interpolation interpolation">mass</span><span class="token string-interpolation interpolation punctuation" style="color:#393A34">}</span><span class="token string-interpolation string" style="color:#e3116c"> kg&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">print</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string-interpolation string" style="color:#e3116c">f&quot;Center of Mass: </span><span class="token string-interpolation interpolation punctuation" style="color:#393A34">{</span><span class="token string-interpolation interpolation">com</span><span class="token string-interpolation interpolation punctuation" style="color:#393A34">}</span><span class="token string-interpolation string" style="color:#e3116c">&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">print</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string-interpolation string" style="color:#e3116c">f&quot;Inertia Tensor:\n</span><span class="token string-interpolation interpolation punctuation" style="color:#393A34">{</span><span class="token string-interpolation interpolation">inertia</span><span class="token string-interpolation interpolation punctuation" style="color:#393A34">}</span><span class="token string-interpolation string" style="color:#e3116c">&quot;</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre></div></div>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="challenge-3-self-collision-during-joint-motion">Challenge 3: Self-Collision During Joint Motion<a href="#challenge-3-self-collision-during-joint-motion" class="hash-link" aria-label="Direct link to Challenge 3: Self-Collision During Joint Motion" title="Direct link to Challenge 3: Self-Collision During Joint Motion" translate="no">‚Äã</a></h3>
<p><strong>Problem</strong>: When the humanoid moves its limbs, links collide with each other (e.g., thigh intersects torso during hip flexion), causing unrealistic physics behavior or simulation crashes.</p>
<p><strong>Solution</strong>: Define collision geometry that is simplified and slightly smaller than visual geometry. Add collision filtering in Gazebo to disable collision checking between adjacent links. In URDF, use separate <code>collision</code> tags with simplified shapes:</p>
<div class="language-xml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-xml codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token entity named-entity" style="color:#36acaa">&amp;lt;</span><span class="token plain">collision</span><span class="token entity named-entity" style="color:#36acaa">&amp;gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token entity named-entity" style="color:#36acaa">&amp;lt;</span><span class="token plain">geometry</span><span class="token entity named-entity" style="color:#36acaa">&amp;gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token entity named-entity" style="color:#36acaa">&amp;lt;</span><span class="token plain">!-- Use capsule or smaller cylinder instead of visual mesh --</span><span class="token entity named-entity" style="color:#36acaa">&amp;gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token entity named-entity" style="color:#36acaa">&amp;lt;</span><span class="token plain">cylinder radius=&quot;0.045&quot; length=&quot;0.38&quot;/</span><span class="token entity named-entity" style="color:#36acaa">&amp;gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token entity named-entity" style="color:#36acaa">&amp;lt;</span><span class="token plain">/geometry</span><span class="token entity named-entity" style="color:#36acaa">&amp;gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token entity named-entity" style="color:#36acaa">&amp;lt;</span><span class="token plain">/collision</span><span class="token entity named-entity" style="color:#36acaa">&amp;gt;</span><br></span></code></pre></div></div>
<p>And in Gazebo, disable specific collisions:</p>
<div class="language-xml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-xml codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token entity named-entity" style="color:#36acaa">&amp;lt;</span><span class="token plain">gazebo</span><span class="token entity named-entity" style="color:#36acaa">&amp;gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token entity named-entity" style="color:#36acaa">&amp;lt;</span><span class="token plain">plugin name=&quot;disable_collisions&quot; filename=&quot;libgazebo_ros_disable_collisions.so&quot;</span><span class="token entity named-entity" style="color:#36acaa">&amp;gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token entity named-entity" style="color:#36acaa">&amp;lt;</span><span class="token plain">link1</span><span class="token entity named-entity" style="color:#36acaa">&amp;gt;</span><span class="token plain">thigh_left</span><span class="token entity named-entity" style="color:#36acaa">&amp;lt;</span><span class="token plain">/link1</span><span class="token entity named-entity" style="color:#36acaa">&amp;gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token entity named-entity" style="color:#36acaa">&amp;lt;</span><span class="token plain">link2</span><span class="token entity named-entity" style="color:#36acaa">&amp;gt;</span><span class="token plain">torso</span><span class="token entity named-entity" style="color:#36acaa">&amp;lt;</span><span class="token plain">/link2</span><span class="token entity named-entity" style="color:#36acaa">&amp;gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token entity named-entity" style="color:#36acaa">&amp;lt;</span><span class="token plain">/plugin</span><span class="token entity named-entity" style="color:#36acaa">&amp;gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token entity named-entity" style="color:#36acaa">&amp;lt;</span><span class="token plain">/gazebo</span><span class="token entity named-entity" style="color:#36acaa">&amp;gt;</span><br></span></code></pre></div></div>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="best-practices">Best Practices<a href="#best-practices" class="hash-link" aria-label="Direct link to Best Practices" title="Direct link to Best Practices" translate="no">‚Äã</a></h2>
<ol>
<li class="">
<p><strong>Use Xacro for symmetry</strong>: Humanoid robots have left/right symmetry. Define arm and leg chains as Xacro macros with a <code>reflect</code> parameter to automatically generate mirrored limbs, reducing duplication and errors.</p>
</li>
<li class="">
<p><strong>Validate inertial properties</strong>: Always compute inertia tensors from CAD models or analytical formulas. Incorrect inertia values cause unrealistic dynamics, making it impossible to tune controllers effectively.</p>
</li>
<li class="">
<p><strong>Test joints independently</strong>: Before simulating the full humanoid, test each joint chain (arm, leg) separately in Gazebo. Verify range of motion, check for self-collisions, and tune damping/friction parameters.</p>
</li>
<li class="">
<p><strong>Monitor CoM in real-time</strong>: Add a ROS 2 node that subscribes to joint states, computes the CoM, and publishes it as a <code>PointStamped</code> message for visualization in RViz. This helps debug balance issues during development.</p>
</li>
<li class="">
<p><strong>Start with reduced DOF</strong>: Begin with a simplified humanoid (e.g., 2-DOF legs, fixed torso) to develop walking controllers. Incrementally add joints as you validate each subsystem, rather than debugging a full 30-DOF humanoid from the start.</p>
</li>
</ol>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="summary">Summary<a href="#summary" class="hash-link" aria-label="Direct link to Summary" title="Direct link to Summary" translate="no">‚Äã</a></h2>
<p>Key takeaways from this chapter:</p>
<ul>
<li class="">Humanoid URDF models require hierarchical kinematic structures with carefully designed serial chains for limbs, accurate inertial properties for balance, and realistic joint limits and dynamics for motion control</li>
<li class="">Kinematic chains define the parent-child relationships between links, enabling forward kinematics for end-effector pose computation and inverse kinematics for motion planning</li>
<li class="">Joint limits (position, velocity, effort) and dynamics (damping, friction) must match hardware specifications and biomechanical constraints to ensure safe and realistic operation</li>
<li class="">The center of mass (CoM) is the weighted average of all link masses and must remain above the support polygon for static balance or follow ZMP constraints for dynamic balance</li>
<li class="">Balance control strategies include ankle torque adjustments for small disturbances, hip strategies for larger corrections, stepping to reposition the support polygon, and compliance to absorb impacts</li>
<li class="">Accurate humanoid modeling is essential for VLA systems that must control bipedal robots in real-world manipulation and navigation tasks</li>
</ul>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="further-reading">Further Reading<a href="#further-reading" class="hash-link" aria-label="Direct link to Further Reading" title="Direct link to Further Reading" translate="no">‚Äã</a></h2>
<ul>
<li class=""><strong>Official Documentation</strong>: <a href="https://docs.ros.org/en/humble/Tutorials/Intermediate/URDF/URDF-Main.html" target="_blank" rel="noopener noreferrer" class="">ROS 2 URDF Tutorial</a> - Comprehensive guide to URDF syntax and conventions</li>
<li class=""><strong>Research Papers</strong>:<!-- -->
<ul>
<li class="">Kajita et al. (2003), &quot;Biped Walking Pattern Generation by using Preview Control of Zero-Moment Point&quot; - Foundational ZMP-based walking controller</li>
<li class="">Pratt and Tedrake (2006), &quot;Velocity-Based Stability Margins for Fast Bipedal Walking&quot; - Capture point theory for dynamic balance</li>
<li class="">Sentis and Khatib (2005), &quot;Synthesis of Whole-Body Behaviors through Hierarchical Control of Behavioral Primitives&quot; - Whole-body control for humanoids</li>
</ul>
</li>
<li class=""><strong>Tutorials</strong>:<!-- -->
<ul>
<li class=""><a href="http://gazebosim.org/tutorials?tut=humanoid_teleoperation" target="_blank" rel="noopener noreferrer" class="">Gazebo Humanoid Robot Tutorial</a> - Simulating and controlling humanoid robots</li>
<li class=""><a href="https://moveit.picknik.ai/" target="_blank" rel="noopener noreferrer" class="">MoveIt 2 with Humanoids</a> - Motion planning for high-DOF humanoid arms</li>
</ul>
</li>
<li class=""><strong>Community Resources</strong>:<!-- -->
<ul>
<li class=""><a href="https://discourse.ros.org/c/humanoid" target="_blank" rel="noopener noreferrer" class="">Humanoids ROS Discourse</a> - Community discussions on humanoid robotics</li>
<li class=""><a href="https://humanoids.ieee-ras.org/" target="_blank" rel="noopener noreferrer" class="">IEEE-RAS Humanoids Conference</a> - Latest research and applications</li>
</ul>
</li>
</ul>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="review-questions">Review Questions<a href="#review-questions" class="hash-link" aria-label="Direct link to Review Questions" title="Direct link to Review Questions" translate="no">‚Äã</a></h2>
<ol>
<li class="">
<p>Explain the hierarchical kinematic structure of a humanoid robot URDF. Why is the pelvis typically chosen as the root link rather than the head or feet?</p>
</li>
<li class="">
<p>A humanoid robot has a total mass of 50 kg and a CoM height of 0.9 m. During walking, the CoM accelerates forward at 0.5 m/s¬≤. Calculate the ZMP position relative to the CoM. Will the robot remain balanced if the CoM is directly above the ankle (assume g = 9.81 m/s¬≤)?</p>
</li>
<li class="">
<p>Compare the advantages and disadvantages of static balance versus dynamic balance for bipedal locomotion. In what scenarios would each approach be preferred?</p>
</li>
<li class="">
<p>A humanoid&#x27;s knee joint has an effort limit of 150 N‚ãÖm and a damping coefficient of 0.5 N‚ãÖm‚ãÖs/rad. If the knee is rotating at 1.0 rad/s and the controller commands maximum torque, what is the net torque available for acceleration?</p>
</li>
<li class="">
<p>Describe the three primary balance strategies (ankle, hip, stepping) and explain when each should be used based on the magnitude and direction of external disturbances.</p>
</li>
<li class="">
<p>Why is it important to define accurate inertia tensors for each link in a humanoid URDF? What simulation artifacts might occur if inertia values are incorrect?</p>
</li>
<li class="">
<p>Explain how the support polygon changes during the gait cycle of bipedal walking (double support ‚Üí single support ‚Üí double support). How does this affect CoM trajectory planning?</p>
</li>
</ol>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="hands-on-exercise">Hands-On Exercise<a href="#hands-on-exercise" class="hash-link" aria-label="Direct link to Hands-On Exercise" title="Direct link to Hands-On Exercise" translate="no">‚Äã</a></h2>
<p><strong>Exercise Title</strong>: Building and Simulating a Simple Bipedal Walker</p>
<p><strong>Objective</strong>: Create a URDF model for a minimal bipedal robot, simulate it in Gazebo, compute its center of mass, and implement a basic balance controller.</p>
<p><strong>Prerequisites</strong>:</p>
<ul>
<li class="">Completed Chapters 5 (URDF Basics) and 8 (Sensor Modeling)</li>
<li class="">ROS 2 Humble installed with Gazebo</li>
<li class="">Python 3.10+ with NumPy and SciPy</li>
</ul>
<p><strong>Steps</strong>:</p>
<ol>
<li class="">
<p>Use the provided <code>simple_humanoid.urdf</code> from the Practical Example section. Save it to <code>~/ros2_ws/src/my_humanoid/urdf/simple_humanoid.urdf</code>.</p>
</li>
<li class="">
<p>Create a launch file to spawn the robot in Gazebo and start <code>robot_state_publisher</code>:</p>
</li>
</ol>
<div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> launch </span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> LaunchDescription</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> launch_ros</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">actions </span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> Node</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> launch</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">actions </span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> IncludeLaunchDescription</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> launch</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">launch_description_sources </span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> PythonLaunchDescriptionSource</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> ament_index_python</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">packages </span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> get_package_share_directory</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> os</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">def</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">generate_launch_description</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    pkg_share </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> get_package_share_directory</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;my_humanoid&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    urdf_file </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> os</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">path</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">join</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">pkg_share</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;urdf&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;simple_humanoid.urdf&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">with</span><span class="token plain"> </span><span class="token builtin">open</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">urdf_file</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;r&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">as</span><span class="token plain"> infp</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        robot_desc </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> infp</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">read</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> LaunchDescription</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Node</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            package</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&#x27;robot_state_publisher&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            executable</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&#x27;robot_state_publisher&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            output</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&#x27;screen&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            parameters</span><span class="token operator" style="color:#393A34">=</span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">{</span><span class="token string" style="color:#e3116c">&#x27;robot_description&#x27;</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> robot_desc</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Node</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            package</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&#x27;gazebo_ros&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            executable</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&#x27;spawn_entity.py&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            arguments</span><span class="token operator" style="color:#393A34">=</span><span class="token punctuation" style="color:#393A34">[</span><span class="token string" style="color:#e3116c">&#x27;-entity&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;simple_humanoid&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                      </span><span class="token string" style="color:#e3116c">&#x27;-topic&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;robot_description&#x27;</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            output</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&#x27;screen&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        IncludeLaunchDescription</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            PythonLaunchDescriptionSource</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                get_package_share_directory</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;gazebo_ros&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token string" style="color:#e3116c">&#x27;/launch/gazebo.launch.py&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre></div></div>
<ol start="3">
<li class="">Create a ROS 2 node that subscribes to <code>/joint_states</code>, computes the center of mass, and publishes it as a <code>PointStamped</code> message for visualization:</li>
</ol>
<div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> rclpy</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> rclpy</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">node </span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> Node</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> sensor_msgs</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">msg </span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> JointState</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> geometry_msgs</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">msg </span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> PointStamped</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> urdf_parser_py</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">urdf </span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> URDF</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> numpy </span><span class="token keyword" style="color:#00009f">as</span><span class="token plain"> np</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">class</span><span class="token plain"> </span><span class="token class-name">CoMPublisher</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">Node</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">def</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">__init__</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">self</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token builtin">super</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">__init__</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;com_publisher&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        self</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">subscription </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> self</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">create_subscription</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            JointState</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;joint_states&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> self</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">joint_state_callback</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">10</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        self</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">com_publisher </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> self</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">create_publisher</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            PointStamped</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;center_of_mass&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">10</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic"># Load URDF and extract mass properties</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        robot_desc </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> self</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">get_parameter</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;robot_description&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">value</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        self</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">robot </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> URDF</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">from_xml_string</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">robot_desc</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        self</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">get_logger</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">info</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;CoM Publisher initialized&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">def</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">joint_state_callback</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">self</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> msg</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic"># Simplified: assume fixed pose, compute static CoM</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic"># (Full implementation would use TF2 to get link transforms)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        com </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> self</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">compute_static_com</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        com_msg </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> PointStamped</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        com_msg</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">header</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">stamp </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> self</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">get_clock</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">now</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">to_msg</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        com_msg</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">header</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">frame_id </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;base_link&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        com_msg</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">point</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">x </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> com</span><span class="token punctuation" style="color:#393A34">[</span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        com_msg</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">point</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">y </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> com</span><span class="token punctuation" style="color:#393A34">[</span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        com_msg</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">point</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">z </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> com</span><span class="token punctuation" style="color:#393A34">[</span><span class="token number" style="color:#36acaa">2</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        self</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">com_publisher</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">publish</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">com_msg</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">def</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">compute_static_com</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">self</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic"># Simplified calculation (assumes default joint positions)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        total_mass </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0.0</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        weighted_sum </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> np</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">zeros</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">3</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">for</span><span class="token plain"> link </span><span class="token keyword" style="color:#00009f">in</span><span class="token plain"> self</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">robot</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">links</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> link</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">inertial</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                mass </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> link</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">inertial</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">mass</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token comment" style="color:#999988;font-style:italic"># For simplicity, use link origin as CoM position</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token comment" style="color:#999988;font-style:italic"># (Real implementation uses forward kinematics)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                pos </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> np</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">array</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">[</span><span class="token number" style="color:#36acaa">0.0</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0.0</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0.8</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic"># Approximate</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                weighted_sum </span><span class="token operator" style="color:#393A34">+=</span><span class="token plain"> mass </span><span class="token operator" style="color:#393A34">*</span><span class="token plain"> pos</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                total_mass </span><span class="token operator" style="color:#393A34">+=</span><span class="token plain"> mass</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> weighted_sum </span><span class="token operator" style="color:#393A34">/</span><span class="token plain"> total_mass </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> total_mass </span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain">gt</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">else</span><span class="token plain"> np</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">zeros</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">3</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre></div></div>
<ol start="4">
<li class="">
<p>Launch the simulation: <code>ros2 launch my_humanoid spawn_humanoid.launch.py</code></p>
</li>
<li class="">
<p>Visualize the robot and CoM in RViz. Add a <code>PointStamped</code> display subscribing to <code>/center_of_mass</code> to see the CoM marker.</p>
</li>
<li class="">
<p>Use <code>rqt_joint_trajectory_controller</code> or publish to joint command topics to move the legs and observe how the CoM changes.</p>
</li>
</ol>
<p><strong>Expected Outcome</strong>: You should see the bipedal robot standing in Gazebo with a marker in RViz showing its center of mass. As you move the joints, the CoM marker should update, demonstrating the dynamic nature of humanoid balance.</p>
<p><strong>Extension Challenges</strong> (Optional):</p>
<ul>
<li class="">Implement a full forward kinematics solver using TF2 to compute accurate link transforms and CoM position</li>
<li class="">Add an ankle balance controller that adjusts ankle joint torques to keep the CoM above the support polygon</li>
<li class="">Create a simple walking gait by commanding sinusoidal joint trajectories and monitor ZMP stability</li>
</ul>
<p><strong>Complete code available in</strong>: <code>/static/code/vla/chapter17/</code></p>
<hr>
<p><strong>Previous Chapter</strong>: <a class="" href="/AI_COURSE_book/docs/module-03-isaac/week-09/ch13-vslam-nav2">Visual SLAM and Navigation</a>
<strong>Next Chapter</strong>: <a class="" href="/AI_COURSE_book/docs/module-04-vla/week-12/ch19-grasping">Manipulation Planning</a>
<strong>Module Overview</strong>: <a class="" href="/AI_COURSE_book/docs/module-04-vla/">VLA Systems</a></p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="row margin-top--sm theme-doc-footer-edit-meta-row"><div class="col noPrint_WFHX"><a href="https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/module-04-vla/week-11/ch17-humanoid-urdf.md" target="_blank" rel="noopener noreferrer" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_JAkA"></div></div></footer></article><nav class="docusaurus-mt-lg pagination-nav" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/AI_COURSE_book/docs/module-04-vla"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Module 4: VLA Integration (Weeks 11-13)</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/AI_COURSE_book/docs/module-04-vla/week-11/ch18-joint-control"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Joint-Level Control</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#learning-objectives" class="table-of-contents__link toc-highlight">Learning Objectives</a></li><li><a href="#introduction" class="table-of-contents__link toc-highlight">Introduction</a></li><li><a href="#1-humanoid-urdf-structure" class="table-of-contents__link toc-highlight">1. Humanoid URDF Structure</a><ul><li><a href="#hierarchical-kinematic-architecture" class="table-of-contents__link toc-highlight">Hierarchical Kinematic Architecture</a></li><li><a href="#link-properties-for-humanoid-robots" class="table-of-contents__link toc-highlight">Link Properties for Humanoid Robots</a></li><li><a href="#material-and-friction-properties" class="table-of-contents__link toc-highlight">Material and Friction Properties</a></li></ul></li><li><a href="#2-kinematic-chains" class="table-of-contents__link toc-highlight">2. Kinematic Chains</a><ul><li><a href="#serial-kinematic-chains-for-limbs" class="table-of-contents__link toc-highlight">Serial Kinematic Chains for Limbs</a></li><li><a href="#leg-kinematic-chains-for-bipedal-locomotion" class="table-of-contents__link toc-highlight">Leg Kinematic Chains for Bipedal Locomotion</a></li><li><a href="#forward-and-inverse-kinematics" class="table-of-contents__link toc-highlight">Forward and Inverse Kinematics</a></li></ul></li><li><a href="#3-joint-limits-and-dynamics" class="table-of-contents__link toc-highlight">3. Joint Limits and Dynamics</a><ul><li><a href="#position-velocity-and-effort-limits" class="table-of-contents__link toc-highlight">Position, Velocity, and Effort Limits</a></li><li><a href="#joint-dynamics-damping-and-friction" class="table-of-contents__link toc-highlight">Joint Dynamics: Damping and Friction</a></li><li><a href="#transmission-and-actuator-modeling" class="table-of-contents__link toc-highlight">Transmission and Actuator Modeling</a></li></ul></li><li><a href="#4-center-of-mass" class="table-of-contents__link toc-highlight">4. Center of Mass</a><ul><li><a href="#calculating-system-center-of-mass" class="table-of-contents__link toc-highlight">Calculating System Center of Mass</a></li><li><a href="#com-projection-and-support-polygon" class="table-of-contents__link toc-highlight">CoM Projection and Support Polygon</a></li><li><a href="#dynamic-com-trajectory-planning" class="table-of-contents__link toc-highlight">Dynamic CoM Trajectory Planning</a></li></ul></li><li><a href="#5-balance-constraints" class="table-of-contents__link toc-highlight">5. Balance Constraints</a><ul><li><a href="#zero-moment-point-zmp-theory" class="table-of-contents__link toc-highlight">Zero-Moment Point (ZMP) Theory</a></li><li><a href="#static-vs-dynamic-balance" class="table-of-contents__link toc-highlight">Static vs. Dynamic Balance</a></li><li><a href="#compliance-and-ankle-strategies" class="table-of-contents__link toc-highlight">Compliance and Ankle Strategies</a></li></ul></li><li><a href="#practical-example" class="table-of-contents__link toc-highlight">Practical Example</a></li><li><a href="#common-challenges-and-solutions" class="table-of-contents__link toc-highlight">Common Challenges and Solutions</a><ul><li><a href="#challenge-1-unstable-simulation-due-to-high-contact-stiffness" class="table-of-contents__link toc-highlight">Challenge 1: Unstable Simulation Due to High Contact Stiffness</a></li><li><a href="#challenge-2-incorrect-center-of-mass-causing-balance-issues" class="table-of-contents__link toc-highlight">Challenge 2: Incorrect Center of Mass Causing Balance Issues</a></li><li><a href="#challenge-3-self-collision-during-joint-motion" class="table-of-contents__link toc-highlight">Challenge 3: Self-Collision During Joint Motion</a></li></ul></li><li><a href="#best-practices" class="table-of-contents__link toc-highlight">Best Practices</a></li><li><a href="#summary" class="table-of-contents__link toc-highlight">Summary</a></li><li><a href="#further-reading" class="table-of-contents__link toc-highlight">Further Reading</a></li><li><a href="#review-questions" class="table-of-contents__link toc-highlight">Review Questions</a></li><li><a href="#hands-on-exercise" class="table-of-contents__link toc-highlight">Hands-On Exercise</a></li></ul></div></div></div></div></main></div></div></div><footer class="theme-layout-footer footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="theme-layout-footer-column col footer__col"><div class="footer__title">üìñ Textbook Modules</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/AI_COURSE_book/docs/foundations">üîß Foundations</a></li><li class="footer__item"><a class="footer__link-item" href="/AI_COURSE_book/docs/module-01-ros2">ü§ñ ROS 2</a></li><li class="footer__item"><a class="footer__link-item" href="/AI_COURSE_book/docs/module-02-digital-twin">üîÑ Digital Twin</a></li><li class="footer__item"><a class="footer__link-item" href="/AI_COURSE_book/docs/module-03-isaac">‚ö° NVIDIA Isaac</a></li><li class="footer__item"><a class="footer__link-item" href="/AI_COURSE_book/docs/module-04-vla">üß† VLA Integration</a></li></ul></div><div class="theme-layout-footer-column col footer__col"><div class="footer__title">üõ†Ô∏è Resources</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://github.com/noori/hackathon1_book" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub Repository<svg width="13.5" height="13.5" aria-label="(opens in new tab)" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li><li class="footer__item"><a href="https://docs.ros.org/en/humble/" target="_blank" rel="noopener noreferrer" class="footer__link-item">ROS 2 Documentation<svg width="13.5" height="13.5" aria-label="(opens in new tab)" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li><li class="footer__item"><a href="https://developer.nvidia.com/isaac-sim" target="_blank" rel="noopener noreferrer" class="footer__link-item">NVIDIA Isaac Sim<svg width="13.5" height="13.5" aria-label="(opens in new tab)" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li></ul></div><div class="theme-layout-footer-column col footer__col"><div class="footer__title">üåê Community</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://discourse.ros.org/" target="_blank" rel="noopener noreferrer" class="footer__link-item">ROS Discourse<svg width="13.5" height="13.5" aria-label="(opens in new tab)" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li><li class="footer__item"><a href="https://robotics.stackexchange.com/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Robotics Stack Exchange<svg width="13.5" height="13.5" aria-label="(opens in new tab)" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright ¬© 2025 Physical AI & Humanoid Robotics Textbook. Built with Docusaurus.</div></div></div></footer></div>
</body>
</html>