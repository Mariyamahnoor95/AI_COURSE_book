"use strict";(globalThis.webpackChunkmy_website=globalThis.webpackChunkmy_website||[]).push([[3144],{8020:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>a,contentTitle:()=>o,default:()=>h,frontMatter:()=>r,metadata:()=>t,toc:()=>c});const t=JSON.parse('{"id":"module-02-digital-twin/week-07/ch10-digital-twin","title":"Digital Twin Concepts","description":"Learning Objectives","source":"@site/docs/module-02-digital-twin/week-07/ch10-digital-twin.md","sourceDirName":"module-02-digital-twin/week-07","slug":"/module-02-digital-twin/week-07/ch10-digital-twin","permalink":"/AI_COURSE_book/docs/module-02-digital-twin/week-07/ch10-digital-twin","draft":false,"unlisted":false,"editUrl":"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/module-02-digital-twin/week-07/ch10-digital-twin.md","tags":[],"version":"current","sidebarPosition":2,"frontMatter":{"id":"ch10-digital-twin","title":"Digital Twin Concepts","sidebar_label":"Digital Twin Concepts","sidebar_position":2},"sidebar":"textbookSidebar","previous":{"title":"Unity Visualization","permalink":"/AI_COURSE_book/docs/module-02-digital-twin/week-07/ch09-unity-viz"},"next":{"title":"Module 3: NVIDIA Isaac (Weeks 8-10)","permalink":"/AI_COURSE_book/docs/module-03-isaac"}}');var s=i(4848),l=i(8453);const r={id:"ch10-digital-twin",title:"Digital Twin Concepts",sidebar_label:"Digital Twin Concepts",sidebar_position:2},o="Digital Twin Concepts",a={},c=[{value:"Learning Objectives",id:"learning-objectives",level:2},{value:"Introduction",id:"introduction",level:2},{value:"1. Digital Twin Architecture",id:"1-digital-twin-architecture",level:2},{value:"Three-Layer Architecture",id:"three-layer-architecture",level:3},{value:"Core Components",id:"core-components",level:3},{value:"Reference Architecture with ROS 2",id:"reference-architecture-with-ros-2",level:3},{value:"2. State Synchronization",id:"2-state-synchronization",level:2},{value:"Challenges of Real-Time Sync",id:"challenges-of-real-time-sync",level:3},{value:"Synchronization Strategies",id:"synchronization-strategies",level:3},{value:"Time Synchronization",id:"time-synchronization",level:3},{value:"3. Bi-Directional Communication",id:"3-bi-directional-communication",level:2},{value:"Physical \u2192 Digital (Telemetry)",id:"physical--digital-telemetry",level:3},{value:"Digital \u2192 Physical (Commands)",id:"digital--physical-commands",level:3},{value:"Safety and Validation",id:"safety-and-validation",level:3},{value:"4. Predictive Analytics",id:"4-predictive-analytics",level:2},{value:"Anomaly Detection",id:"anomaly-detection",level:3},{value:"Predictive Maintenance",id:"predictive-maintenance",level:3},{value:"Fleet-Wide Optimization",id:"fleet-wide-optimization",level:3},{value:"5. Applications in Robotics",id:"5-applications-in-robotics",level:2},{value:"Remote Monitoring",id:"remote-monitoring",level:3},{value:"Testing in Simulation",id:"testing-in-simulation",level:3},{value:"Training and Education",id:"training-and-education",level:3},{value:"Digital Twins in Production",id:"digital-twins-in-production",level:3},{value:"Summary",id:"summary",level:2},{value:"Review Questions",id:"review-questions",level:2},{value:"Hands-on Exercises",id:"hands-on-exercises",level:2},{value:"Exercise 1: Basic Digital Twin",id:"exercise-1-basic-digital-twin",level:3},{value:"Exercise 2: Command Relay",id:"exercise-2-command-relay",level:3},{value:"Exercise 3: Anomaly Detection",id:"exercise-3-anomaly-detection",level:3},{value:"Further Reading",id:"further-reading",level:2}];function d(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",hr:"hr",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,l.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.header,{children:(0,s.jsx)(n.h1,{id:"digital-twin-concepts",children:"Digital Twin Concepts"})}),"\n",(0,s.jsx)(n.h2,{id:"learning-objectives",children:"Learning Objectives"}),"\n",(0,s.jsx)(n.p,{children:"By the end of this chapter, you will be able to:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Understand digital twin architecture and its components"}),"\n",(0,s.jsx)(n.li,{children:"Implement real-time state synchronization between physical and virtual robots"}),"\n",(0,s.jsx)(n.li,{children:"Configure bi-directional communication for command and telemetry"}),"\n",(0,s.jsx)(n.li,{children:"Apply predictive analytics using digital twin data"}),"\n",(0,s.jsx)(n.li,{children:"Recognize use cases and applications of digital twins in robotics"}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"introduction",children:"Introduction"}),"\n",(0,s.jsxs)(n.p,{children:["A ",(0,s.jsx)(n.strong,{children:"digital twin"})," is a virtual replica of a physical system that mirrors its real-world counterpart in real-time. In robotics, digital twins create a bridge between physical robots and their simulated models, enabling remote monitoring, predictive maintenance, and advanced analytics."]}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"The digital twin concept"}),": Instead of treating simulation and reality as separate domains, digital twins ",(0,s.jsx)(n.strong,{children:"continuously synchronize"}),":"]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Physical robot"})," \u2192 sends sensor data, telemetry, state \u2192 ",(0,s.jsx)(n.strong,{children:"Digital twin"})]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Digital twin"})," \u2192 sends commands, configurations \u2192 ",(0,s.jsx)(n.strong,{children:"Physical robot"})]}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Why digital twins for robotics?"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Remote monitoring"}),": Visualize robots operating in dangerous or inaccessible locations"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Predictive maintenance"}),": Detect failures before they occur using simulation"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Testing and validation"}),": Test new behaviors in simulation before deploying to hardware"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Fleet management"}),": Monitor thousands of robots from a centralized dashboard"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Training"}),": Train operators and AI models using realistic virtual environments"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Debugging"}),": Replay recorded sensor data to diagnose issues"]}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Digital twin vs traditional simulation:"})}),"\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"Feature"}),(0,s.jsx)(n.th,{children:"Traditional Sim"}),(0,s.jsx)(n.th,{children:"Digital Twin"})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.strong,{children:"Connection"})}),(0,s.jsx)(n.td,{children:"Offline"}),(0,s.jsx)(n.td,{children:"Real-time sync"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.strong,{children:"Data flow"})}),(0,s.jsx)(n.td,{children:"One-way"}),(0,s.jsx)(n.td,{children:"Bi-directional"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.strong,{children:"Purpose"})}),(0,s.jsx)(n.td,{children:"Testing"}),(0,s.jsx)(n.td,{children:"Monitoring + Testing"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.strong,{children:"State"})}),(0,s.jsx)(n.td,{children:"Simulated only"}),(0,s.jsx)(n.td,{children:"Mirrors reality"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.strong,{children:"Use case"})}),(0,s.jsx)(n.td,{children:"Pre-deployment"}),(0,s.jsx)(n.td,{children:"Production monitoring"})]})]})]}),"\n",(0,s.jsx)(n.p,{children:"This chapter explores how to build and use digital twins for robotic systems using Gazebo, Unity, and ROS 2."}),"\n",(0,s.jsx)(n.h2,{id:"1-digital-twin-architecture",children:"1. Digital Twin Architecture"}),"\n",(0,s.jsx)(n.h3,{id:"three-layer-architecture",children:"Three-Layer Architecture"}),"\n",(0,s.jsx)(n.p,{children:"A robust digital twin system consists of three layers:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502  PRESENTATION LAYER                            \u2502\n\u2502  (Dashboard, VR/AR, Control Interfaces)        \u2502\n\u2502  - Unity visualization                         \u2502\n\u2502  - Web dashboard                               \u2502\n\u2502  - Mobile apps                                 \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n              \u2502 REST API / WebSocket\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u25bc\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502  DIGITAL TWIN LAYER (Cloud/Edge)               \u2502\n\u2502  - State synchronization                       \u2502\n\u2502  - Historical data storage                     \u2502\n\u2502  - Predictive models                           \u2502\n\u2502  - Fleet management                            \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n              \u2502 ROS 2 Topics / MQTT\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u25bc\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502  PHYSICAL LAYER (Robot)                        \u2502\n\u2502  - Sensors (LiDAR, cameras, IMU)               \u2502\n\u2502  - Actuators (motors, grippers)                \u2502\n\u2502  - Onboard computer (ROS 2 nodes)              \u2502\n\u2502  - Edge processing                             \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n"})}),"\n",(0,s.jsx)(n.h3,{id:"core-components",children:"Core Components"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"1. Physical Robot"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Real hardware with sensors and actuators"}),"\n",(0,s.jsx)(n.li,{children:"Runs ROS 2 nodes for control and sensing"}),"\n",(0,s.jsx)(n.li,{children:"Publishes telemetry to cloud/edge server"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"2. Digital Model"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Virtual robot in Gazebo or Unity"}),"\n",(0,s.jsx)(n.li,{children:"URDF model matching physical robot"}),"\n",(0,s.jsx)(n.li,{children:"Receives state updates from physical robot"}),"\n",(0,s.jsx)(n.li,{children:'Can simulate "what-if" scenarios'}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"3. Synchronization Layer"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Manages bidirectional data flow"}),"\n",(0,s.jsx)(n.li,{children:"Handles network latency and disconnections"}),"\n",(0,s.jsx)(n.li,{children:"Ensures consistency between physical and digital"}),"\n",(0,s.jsx)(n.li,{children:"Timestamps all messages for alignment"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"4. Analytics Engine"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Processes historical data"}),"\n",(0,s.jsx)(n.li,{children:"Trains predictive models"}),"\n",(0,s.jsx)(n.li,{children:"Detects anomalies"}),"\n",(0,s.jsx)(n.li,{children:"Generates alerts and recommendations"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"5. User Interface"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Real-time visualization (Unity, web dashboards)"}),"\n",(0,s.jsx)(n.li,{children:"Control panel for sending commands"}),"\n",(0,s.jsx)(n.li,{children:"Analytics dashboards"}),"\n",(0,s.jsx)(n.li,{children:"Alert management"}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"reference-architecture-with-ros-2",children:"Reference Architecture with ROS 2"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-python",children:'# Digital Twin Core Node\nimport rclpy\nfrom rclpy.node import Node\nfrom sensor_msgs.msg import JointState, LaserScan\nfrom geometry_msgs.msg import Pose\nfrom nav_msgs.msg import Odometry\n\nclass DigitalTwinCore(Node):\n    def __init__(self):\n        super().__init__(\'digital_twin_core\')\n\n        # Subscribe to physical robot telemetry\n        self.odom_sub = self.create_subscription(\n            Odometry, \'/robot/odom\', self.odom_callback, 10\n        )\n        self.joint_sub = self.create_subscription(\n            JointState, \'/robot/joint_states\', self.joint_callback, 10\n        )\n        self.scan_sub = self.create_subscription(\n            LaserScan, \'/robot/scan\', self.scan_callback, 10\n        )\n\n        # Publish to virtual robot (Gazebo/Unity)\n        self.virtual_odom_pub = self.create_publisher(\n            Odometry, \'/virtual/odom\', 10\n        )\n        self.virtual_joint_pub = self.create_publisher(\n            JointState, \'/virtual/joint_states\', 10\n        )\n\n        # Store latest state\n        self.latest_odom = None\n        self.latest_joints = None\n\n    def odom_callback(self, msg):\n        """Receive physical robot odometry"""\n        self.latest_odom = msg\n        # Forward to virtual robot\n        self.virtual_odom_pub.publish(msg)\n        # Store to database for analytics\n        self.store_telemetry(\'odom\', msg)\n\n    def joint_callback(self, msg):\n        """Receive physical robot joint states"""\n        self.latest_joints = msg\n        # Update virtual robot\n        self.virtual_joint_pub.publish(msg)\n\n    def scan_callback(self, msg):\n        """Receive LiDAR scan"""\n        # Forward to virtual environment\n        # Can be used to update virtual obstacles\n        pass\n\n    def store_telemetry(self, data_type, msg):\n        """Store telemetry in time-series database"""\n        # Implementation: write to InfluxDB, PostgreSQL, etc.\n        pass\n'})}),"\n",(0,s.jsx)(n.h2,{id:"2-state-synchronization",children:"2. State Synchronization"}),"\n",(0,s.jsx)(n.h3,{id:"challenges-of-real-time-sync",children:"Challenges of Real-Time Sync"}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Network latency"}),": Physical robot may be 100-500ms away from cloud\n",(0,s.jsx)(n.strong,{children:"Clock drift"}),": Physical and virtual clocks diverge over time\n",(0,s.jsx)(n.strong,{children:"Packet loss"}),": Wireless networks drop messages\n",(0,s.jsx)(n.strong,{children:"State consistency"}),": Ensure virtual matches physical despite delays"]}),"\n",(0,s.jsx)(n.h3,{id:"synchronization-strategies",children:"Synchronization Strategies"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"1. Periodic State Updates (Push Model)"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Physical robot publishes state at fixed rate (10-100 Hz)"}),"\n",(0,s.jsx)(n.li,{children:"Digital twin subscribes and updates"}),"\n",(0,s.jsx)(n.li,{children:"Simple but can overwhelm network"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"2. Event-Driven Updates (Change Detection)"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Only publish when state changes significantly"}),"\n",(0,s.jsx)(n.li,{children:"Reduces bandwidth"}),"\n",(0,s.jsx)(n.li,{children:"Risk of missing gradual changes"}),"\n"]}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"3. Hybrid Approach"})," (Recommended)"]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Critical states (position, velocity): High frequency (50 Hz)"}),"\n",(0,s.jsx)(n.li,{children:"Slow-changing (battery, temperature): Low frequency (1 Hz)"}),"\n",(0,s.jsx)(n.li,{children:"Events (errors, warnings): Immediate"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Example: Optimized State Publisher"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-python",children:'import rclpy\nfrom rclpy.node import Node\nfrom geometry_msgs.msg import PoseStamped\nimport numpy as np\n\nclass SmartStateSynchronizer(Node):\n    def __init__(self):\n        super().__init__(\'smart_sync\')\n\n        # Publishers\n        self.pose_pub = self.create_publisher(\n            PoseStamped, \'/twin/pose\', 10\n        )\n\n        # State tracking\n        self.last_published_pose = None\n        self.position_threshold = 0.05  # 5cm\n        self.angle_threshold = 0.1  # ~6 degrees\n\n        # Timer for maximum update interval\n        self.create_timer(0.1, self.timer_callback)  # Max 10 Hz\n\n        # Subscribe to actual robot pose\n        self.create_subscription(\n            PoseStamped, \'/robot/pose\', self.pose_callback, 10\n        )\n\n        self.current_pose = None\n\n    def pose_callback(self, msg):\n        """Receive pose from physical robot"""\n        self.current_pose = msg\n\n    def timer_callback(self):\n        """Publish if state changed significantly"""\n        if self.current_pose is None:\n            return\n\n        # Check if significant change occurred\n        if self.should_publish(self.current_pose):\n            self.pose_pub.publish(self.current_pose)\n            self.last_published_pose = self.current_pose\n\n    def should_publish(self, new_pose):\n        """Determine if pose change is significant"""\n        if self.last_published_pose is None:\n            return True  # First message\n\n        # Calculate position change\n        dx = new_pose.pose.position.x - self.last_published_pose.pose.position.x\n        dy = new_pose.pose.position.y - self.last_published_pose.pose.position.y\n        distance = np.sqrt(dx**2 + dy**2)\n\n        # Calculate orientation change (simplified)\n        dtheta = abs(\n            new_pose.pose.orientation.z -\n            self.last_published_pose.pose.orientation.z\n        )\n\n        # Publish if threshold exceeded\n        return (distance > self.position_threshold or\n                dtheta > self.angle_threshold)\n'})}),"\n",(0,s.jsx)(n.h3,{id:"time-synchronization",children:"Time Synchronization"}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Problem"}),": Physical robot and digital twin have different clocks"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Solution: NTP (Network Time Protocol)"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"# On physical robot\nsudo apt install ntp\nsudo systemctl enable ntp\nsudo systemctl start ntp\n"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Solution: ROS 2 Time Stamping"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-python",children:"# Always use ROS time in messages\nmsg.header.stamp = self.get_clock().now().to_msg()\n"})}),"\n",(0,s.jsx)(n.h2,{id:"3-bi-directional-communication",children:"3. Bi-Directional Communication"}),"\n",(0,s.jsx)(n.h3,{id:"physical--digital-telemetry",children:"Physical \u2192 Digital (Telemetry)"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Sensor data flow:"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"Physical Robot Sensors \u2192 ROS 2 Topics \u2192 MQTT/DDS \u2192 Cloud \u2192 Digital Twin\n"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Example: MQTT Bridge for Cloud Sync"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-python",children:"import rclpy\nfrom rclpy.node import Node\nimport paho.mqtt.client as mqtt\nimport json\n\nclass ROS2MQTTBridge(Node):\n    def __init__(self):\n        super().__init__('ros2_mqtt_bridge')\n\n        # MQTT client\n        self.mqtt_client = mqtt.Client()\n        self.mqtt_client.connect(\"mqtt.example.com\", 1883)\n\n        # Subscribe to ROS topics\n        self.create_subscription(\n            Odometry, '/robot/odom', self.odom_to_mqtt, 10\n        )\n\n    def odom_to_mqtt(self, msg):\n        \"\"\"Forward odometry to MQTT\"\"\"\n        payload = {\n            'robot_id': 'robot_001',\n            'timestamp': msg.header.stamp.sec,\n            'position': {\n                'x': msg.pose.pose.position.x,\n                'y': msg.pose.pose.position.y,\n                'z': msg.pose.pose.position.z\n            },\n            'velocity': {\n                'linear': msg.twist.twist.linear.x,\n                'angular': msg.twist.twist.angular.z\n            }\n        }\n\n        topic = f'robot/robot_001/telemetry/odom'\n        self.mqtt_client.publish(topic, json.dumps(payload))\n"})}),"\n",(0,s.jsx)(n.h3,{id:"digital--physical-commands",children:"Digital \u2192 Physical (Commands)"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Command flow:"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"UI/Dashboard \u2192 REST API \u2192 MQTT \u2192 ROS 2 Topics \u2192 Physical Robot Actuators\n"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Example: Command Receiver on Physical Robot"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-python",children:"class CommandReceiver(Node):\n    def __init__(self):\n        super().__init__('command_receiver')\n\n        # MQTT subscriber\n        self.mqtt_client = mqtt.Client()\n        self.mqtt_client.on_message = self.on_mqtt_message\n        self.mqtt_client.connect(\"mqtt.example.com\", 1883)\n        self.mqtt_client.subscribe(\"robot/robot_001/commands/#\")\n\n        # ROS publishers\n        self.cmd_vel_pub = self.create_publisher(Twist, '/cmd_vel', 10)\n\n        # Start MQTT loop in background\n        self.mqtt_client.loop_start()\n\n    def on_mqtt_message(self, client, userdata, msg):\n        \"\"\"Receive command from cloud\"\"\"\n        payload = json.loads(msg.payload)\n\n        if msg.topic.endswith('/move'):\n            # Convert JSON to Twist message\n            twist = Twist()\n            twist.linear.x = payload['linear']\n            twist.angular.z = payload['angular']\n            self.cmd_vel_pub.publish(twist)\n            self.get_logger().info(f'Executing move command: {payload}')\n\n        elif msg.topic.endswith('/stop'):\n            # Emergency stop\n            self.cmd_vel_pub.publish(Twist())  # Zero velocity\n"})}),"\n",(0,s.jsx)(n.h3,{id:"safety-and-validation",children:"Safety and Validation"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Command validation before execution:"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-python",children:"def validate_command(self, cmd):\n    \"\"\"Validate command before executing\"\"\"\n    # Check velocity limits\n    if abs(cmd.linear.x) > self.max_linear_vel:\n        self.get_logger().warn('Linear velocity exceeds limit')\n        return False\n\n    if abs(cmd.angular.z) > self.max_angular_vel:\n        self.get_logger().warn('Angular velocity exceeds limit')\n        return False\n\n    # Check robot state\n    if self.battery_level < 0.1:\n        self.get_logger().error('Battery too low for movement')\n        return False\n\n    # Check safety zones\n    if not self.is_in_safe_zone(self.current_pose):\n        self.get_logger().error('Robot outside safe operating zone')\n        return False\n\n    return True\n"})}),"\n",(0,s.jsx)(n.h2,{id:"4-predictive-analytics",children:"4. Predictive Analytics"}),"\n",(0,s.jsx)(n.h3,{id:"anomaly-detection",children:"Anomaly Detection"}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Use case"}),": Detect motor failures before they occur"]}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Approach"}),": Monitor motor current over time"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-python",children:'import numpy as np\nfrom scipy import stats\n\nclass MotorHealthMonitor(Node):\n    def __init__(self):\n        super().__init__(\'motor_health\')\n\n        # Historical data\n        self.current_history = []\n        self.window_size = 100\n\n        self.create_subscription(\n            JointState, \'/joint_states\', self.monitor_callback, 10\n        )\n\n    def monitor_callback(self, msg):\n        """Monitor joint effort (current)"""\n        for i, effort in enumerate(msg.effort):\n            self.current_history.append(effort)\n\n            # Keep only recent history\n            if len(self.current_history) > self.window_size:\n                self.current_history.pop(0)\n\n            # Detect anomaly\n            if len(self.current_history) == self.window_size:\n                if self.detect_anomaly(self.current_history):\n                    self.get_logger().warn(\n                        f\'Anomaly detected in joint {i}: possible failure\'\n                    )\n\n    def detect_anomaly(self, data):\n        """Statistical anomaly detection"""\n        mean = np.mean(data)\n        std = np.std(data)\n        latest = data[-1]\n\n        # Z-score > 3 indicates anomaly\n        z_score = abs((latest - mean) / std)\n        return z_score > 3.0\n'})}),"\n",(0,s.jsx)(n.h3,{id:"predictive-maintenance",children:"Predictive Maintenance"}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Use case"}),": Predict when components will fail"]}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Approach"}),": Machine learning on historical data"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-python",children:"from sklearn.ensemble import RandomForestClassifier\nimport joblib\n\nclass PredictiveMaintenance:\n    def __init__(self):\n        # Load pre-trained model\n        self.model = joblib.load('motor_failure_model.pkl')\n\n    def predict_failure(self, telemetry):\n        \"\"\"Predict if failure will occur in next 24 hours\"\"\"\n        features = self.extract_features(telemetry)\n        prediction = self.model.predict_proba([features])[0]\n\n        failure_probability = prediction[1]  # Probability of failure\n        return failure_probability > 0.7  # 70% threshold\n\n    def extract_features(self, telemetry):\n        \"\"\"Extract features from telemetry\"\"\"\n        return [\n            np.mean(telemetry['motor_current']),\n            np.std(telemetry['motor_current']),\n            np.mean(telemetry['temperature']),\n            telemetry['total_runtime_hours'],\n            telemetry['vibration_level']\n        ]\n"})}),"\n",(0,s.jsx)(n.h3,{id:"fleet-wide-optimization",children:"Fleet-Wide Optimization"}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Use case"}),": Optimize robot task allocation across fleet"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-python",children:'class FleetOptimizer:\n    def __init__(self, robots):\n        self.robots = robots\n\n    def assign_tasks(self, tasks):\n        """Assign tasks to robots optimally"""\n        assignments = {}\n\n        for task in tasks:\n            # Find robot closest to task location\n            best_robot = None\n            min_cost = float(\'inf\')\n\n            for robot in self.robots:\n                cost = self.calculate_cost(robot, task)\n                if cost < min_cost:\n                    min_cost = cost\n                    best_robot = robot\n\n            assignments[task.id] = best_robot\n\n        return assignments\n\n    def calculate_cost(self, robot, task):\n        """Cost = distance + battery penalty"""\n        distance = self.euclidean_distance(\n            robot.position, task.location\n        )\n\n        battery_penalty = 0 if robot.battery > 0.3 else 1000\n\n        return distance + battery_penalty\n'})}),"\n",(0,s.jsx)(n.h2,{id:"5-applications-in-robotics",children:"5. Applications in Robotics"}),"\n",(0,s.jsx)(n.h3,{id:"remote-monitoring",children:"Remote Monitoring"}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Warehouse robots"}),": Visualize 100+ robots on single dashboard\n",(0,s.jsx)(n.strong,{children:"Underwater robots"}),": Monitor in real-time from surface vessel\n",(0,s.jsx)(n.strong,{children:"Space robots"}),": Operate Mars rovers with 20-minute light delay"]}),"\n",(0,s.jsx)(n.h3,{id:"testing-in-simulation",children:"Testing in Simulation"}),"\n",(0,s.jsx)(n.p,{children:"Before deploying new behavior to physical robot:"}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsx)(n.li,{children:"Update digital twin with new code"}),"\n",(0,s.jsx)(n.li,{children:"Run simulated tests"}),"\n",(0,s.jsx)(n.li,{children:"Validate safety and performance"}),"\n",(0,s.jsx)(n.li,{children:"Deploy to physical robot only after passing"}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"training-and-education",children:"Training and Education"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Train operators using digital twin before touching hardware"}),"\n",(0,s.jsx)(n.li,{children:"Students learn on virtual robots (no hardware damage)"}),"\n",(0,s.jsx)(n.li,{children:"AI models trained in simulation, deployed to hardware"}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"digital-twins-in-production",children:"Digital Twins in Production"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Example: Amazon warehouse robots"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"200,000+ robots monitored via digital twins"}),"\n",(0,s.jsx)(n.li,{children:"Predictive maintenance reduces downtime by 40%"}),"\n",(0,s.jsx)(n.li,{children:"Fleet optimization increases throughput by 25%"}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"summary",children:"Summary"}),"\n",(0,s.jsx)(n.p,{children:"Key takeaways:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Digital twins"})," create real-time virtual replicas of physical robots"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Three-layer architecture"}),": Physical, Digital Twin, Presentation"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"State synchronization"})," requires handling latency, clock drift, packet loss"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Bi-directional communication"})," enables both monitoring and control"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Predictive analytics"})," enable anomaly detection and maintenance forecasting"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Applications"})," include remote monitoring, testing, training, fleet optimization"]}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Best practices:"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Use event-driven updates to reduce bandwidth"}),"\n",(0,s.jsx)(n.li,{children:"Always validate commands before executing on physical robot"}),"\n",(0,s.jsx)(n.li,{children:"Implement time synchronization (NTP, ROS time stamps)"}),"\n",(0,s.jsx)(n.li,{children:"Store historical data for analytics and debugging"}),"\n",(0,s.jsx)(n.li,{children:"Design for network disconnections (graceful degradation)"}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"review-questions",children:"Review Questions"}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsx)(n.li,{children:"What is the difference between a traditional simulation and a digital twin?"}),"\n",(0,s.jsx)(n.li,{children:"Why is time synchronization important in digital twin systems?"}),"\n",(0,s.jsx)(n.li,{children:"How would you reduce network bandwidth for state synchronization?"}),"\n",(0,s.jsx)(n.li,{children:"What are the safety considerations for bi-directional communication?"}),"\n",(0,s.jsx)(n.li,{children:"How can digital twins enable predictive maintenance?"}),"\n",(0,s.jsx)(n.li,{children:"When would you use MQTT vs ROS 2 DDS for communication?"}),"\n",(0,s.jsx)(n.li,{children:"What are the main challenges of implementing digital twins at scale?"}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"hands-on-exercises",children:"Hands-on Exercises"}),"\n",(0,s.jsx)(n.h3,{id:"exercise-1-basic-digital-twin",children:"Exercise 1: Basic Digital Twin"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Run Gazebo simulation and physical robot (or second simulation)"}),"\n",(0,s.jsx)(n.li,{children:"Create bridge node that syncs robot poses"}),"\n",(0,s.jsx)(n.li,{children:"Visualize both in RViz"}),"\n",(0,s.jsx)(n.li,{children:"Observe latency and synchronization quality"}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"exercise-2-command-relay",children:"Exercise 2: Command Relay"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Implement bi-directional bridge"}),"\n",(0,s.jsxs)(n.li,{children:["Send ",(0,s.jsx)(n.code,{children:"/cmd_vel"})," commands from one robot to other"]}),"\n",(0,s.jsx)(n.li,{children:"Add validation layer (speed limits, safety checks)"}),"\n",(0,s.jsx)(n.li,{children:"Test emergency stop functionality"}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"exercise-3-anomaly-detection",children:"Exercise 3: Anomaly Detection"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Collect joint effort data from robot"}),"\n",(0,s.jsx)(n.li,{children:"Implement Z-score anomaly detection"}),"\n",(0,s.jsx)(n.li,{children:"Trigger alert when anomaly detected"}),"\n",(0,s.jsx)(n.li,{children:"Visualize current over time"}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"further-reading",children:"Further Reading"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"https://www.digitaltwinconsortium.org/",children:"Digital Twin Consortium"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"https://aws.amazon.com/iot-twinmaker/",children:"AWS IoT TwinMaker"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"https://azure.microsoft.com/en-us/services/digital-twins/",children:"Azure Digital Twins"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"https://mqtt.org/",children:"MQTT Protocol Specification"})}),"\n"]}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Next Chapter"}),": ",(0,s.jsx)(n.a,{href:"/AI_COURSE_book/docs/module-03-isaac/week-08/ch11-isaac-sim",children:"Module 3: NVIDIA Isaac Sim \u2192"})]}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Previous Chapter"}),": ",(0,s.jsx)(n.a,{href:"/AI_COURSE_book/docs/module-02-digital-twin/week-07/ch09-unity-viz",children:"\u2190 Unity for Robot Visualization"})]})]})}function h(e={}){const{wrapper:n}={...(0,l.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(d,{...e})}):d(e)}},8453:(e,n,i)=>{i.d(n,{R:()=>r,x:()=>o});var t=i(6540);const s={},l=t.createContext(s);function r(e){const n=t.useContext(l);return t.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:r(e.components),t.createElement(l.Provider,{value:n},e.children)}}}]);